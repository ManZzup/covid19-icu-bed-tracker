(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(module,__webpack_exports__,__webpack_require__){"use strict";var style=__webpack_require__(2),style_default=__webpack_require__.n(style),react=__webpack_require__(1),react_default=__webpack_require__.n(react),lib=__webpack_require__(3),classCallCheck=__webpack_require__(128),createClass=__webpack_require__(129),possibleConstructorReturn=__webpack_require__(131),getPrototypeOf=__webpack_require__(130),inherits=__webpack_require__(132),d2_i18n=__webpack_require__(23),d2_i18n_default=__webpack_require__.n(d2_i18n);function Settings(_ref){var className=_ref.className;return react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",className:className},react_default.a.createElement("path",{d:"M0 0h48v48H0z",fill:"none"}),react_default.a.createElement("path",{d:"M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3c-1.22.51-2.35 1.17-3.38 1.97L9.9 10.1c-.45-.17-.97 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3c1.22-.51 2.35-1.17 3.38-1.97l4.98 2.01c.45.17.97 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}))}function Apps_Apps(_ref){var className=_ref.className;return react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",className:className},react_default.a.createElement("path",{d:"M8 16h8V8H8v8zm12 24h8v-8h-8v8zM8 40h8v-8H8v8zm0-12h8v-8H8v8zm12 0h8v-8h-8v8zM32 8v8h8V8h-8zm-12 8h8V8h-8v8zm12 12h8v-8h-8v8zm0 12h8v-8h-8v8z"}),react_default.a.createElement("path",{d:"M0 0h48v48H0z",fill:"none"}))}function Cancel(_ref){var className=_ref.className;return react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",className:className},react_default.a.createElement("path",{d:"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"}),react_default.a.createElement("path",{d:"M0 0h48v48H0z",fill:"none"}))}Settings.__docgenInfo={description:"",methods:[],displayName:"Settings",props:{className:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/Settings.js"]={name:"Settings",docgenInfo:Settings.__docgenInfo,path:"src/icons/Settings.js"}),Apps_Apps.__docgenInfo={description:"",methods:[],displayName:"Apps",props:{className:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/Apps.js"]={name:"Apps",docgenInfo:Apps_Apps.__docgenInfo,path:"src/icons/Apps.js"}),Cancel.__docgenInfo={description:"",methods:[],displayName:"Cancel",props:{className:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/Cancel.js"]={name:"Cancel",docgenInfo:Cancel.__docgenInfo,path:"src/icons/Cancel.js"});var appIcon={styles:react_default.a.createElement(style_default.a,{id:"255544020"},["svg.jsx-255544020{fill:".concat(lib.i.white,";cursor:pointer;height:24px;width:24px;}")]),className:"jsx-255544020"},trailIcon={styles:react_default.a.createElement(style_default.a,{id:"4078879535"},["svg.jsx-4078879535{fill:".concat(lib.i.grey900,";cursor:pointer;height:24px;width:24px;margin-right:8px;margin-top:4px;}")]),className:"jsx-4078879535"},settingsIcon={styles:react_default.a.createElement(style_default.a,{id:"4285170702"},["svg.jsx-4285170702{margin:8px 8px 0 16px;color:".concat(lib.i.grey900,";height:24px;width:24px;cursor:pointer;}")]),className:"jsx-4285170702"};function TrailIcon(_ref){var onClick=_ref.onClick;return react_default.a.createElement("a",{onClick:onClick},react_default.a.createElement(Cancel,{className:trailIcon.className}))}function Search(_ref2){var value=_ref2.value,onChange=_ref2.onChange,onIconClick=_ref2.onIconClick,contextPath=_ref2.contextPath;return react_default.a.createElement("div",{className:"jsx-2764723183"},react_default.a.createElement("span",{className:"jsx-2764723183"},react_default.a.createElement(lib.e,{value:value,name:"filter",placeholder:d2_i18n_default.a.t("Search apps"),onChange:onChange,trailIcon:react_default.a.createElement(TrailIcon,{onClick:onIconClick}),initialFocus:!0})),react_default.a.createElement("span",{className:"jsx-2764723183"},react_default.a.createElement("a",{href:"".concat(contextPath,"/dhis-web-menu-management"),className:"jsx-2764723183"},react_default.a.createElement(Settings,{className:settingsIcon.className}))),trailIcon.styles,settingsIcon.styles,react_default.a.createElement(style_default.a,{id:"2764723183"},["div.jsx-2764723183{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;height:52px;margin:8px;}","span.jsx-2764723183{-webkit-flex:1 100%;-ms-flex:1 100%;flex:1 100%;}","span.jsx-2764723183:last-child{-webkit-flex:1 auto;-ms-flex:1 auto;flex:1 auto;}"]))}function Item(_ref3){var name=_ref3.name,path=_ref3.path,img=_ref3.img;return react_default.a.createElement("a",{href:path,className:style_default.a.dynamic([["3670725638",[lib.k.primary050]]])},react_default.a.createElement("img",{src:img,alt:"app logo",className:style_default.a.dynamic([["3670725638",[lib.k.primary050]]])}),react_default.a.createElement("div",{className:style_default.a.dynamic([["3670725638",[lib.k.primary050]]])},name),react_default.a.createElement(style_default.a,{id:"3670725638",dynamic:[lib.k.primary050]},["a.__jsx-style-dynamic-selector{display:inline-block;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:96px;margin:8px;padding:8px;border-radius:12px;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}","a.__jsx-style-dynamic-selector:hover,a.__jsx-style-dynamic-selector:focus{background-color:".concat(lib.k.primary050,";cursor:pointer;}"),"a.__jsx-style-dynamic-selector:hover>div.__jsx-style-dynamic-selector{font-weight:500;cursor:pointer;}","img.__jsx-style-dynamic-selector{width:48px;height:48px;cursor:pointer;}","div.__jsx-style-dynamic-selector{margin-top:14px;color:rgba(0,0,0,0.87);font-size:12px;-webkit-letter-spacing:0.01em;-moz-letter-spacing:0.01em;-ms-letter-spacing:0.01em;letter-spacing:0.01em;line-height:14px;text-align:center;cursor:pointer;}"]))}function List(_ref4){var apps=_ref4.apps,filter=_ref4.filter;return react_default.a.createElement("div",{"data-test":"headerbar-apps-menu-list",className:"jsx-2076871745"},apps.filter((function(_ref5){var displayName=_ref5.displayName,name=_ref5.name,appName=displayName||name;return!(filter.length>0)||appName.toLowerCase().match(filter.toLowerCase())})).map((function(_ref6,idx){var displayName=_ref6.displayName,name=_ref6.name,defaultAction=_ref6.defaultAction,icon=_ref6.icon;return react_default.a.createElement(Item,{key:"app-".concat(name,"-").concat(idx),name:displayName||name,path:defaultAction,img:icon})})),react_default.a.createElement(style_default.a,{id:"2076871745"},["div.jsx-2076871745{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-content:flex-start;-ms-flex-line-pack:start;align-content:flex-start;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:30vw;min-width:300px;max-width:560px;min-height:200px;max-height:465px;margin:0 8px 8px 8px;overflow:auto;overflow-x:hidden;}"]))}Search.defaultProps={onIconClick:null};var HeaderBar_Apps_Apps=function(_React$Component){function Apps(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,Apps);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(Apps)).call.apply(_getPrototypeOf2,[this].concat(args)))).state={show:!1,filter:""},_this.onDocClick=function(evt){_this.elContainer&&!_this.elContainer.contains(evt.target)&&_this.setState({show:!1})},_this.onToggle=function(){return _this.setState({show:!_this.state.show})},_this.onChange=function(_ref7){var value=_ref7.value;return _this.setState({filter:value})},_this.onIconClick=function(){return _this.setState({filter:""})},_this.AppMenu=function(apps){return react_default.a.createElement("div",{"data-test":"headerbar-apps-menu",className:"jsx-1740460911"},react_default.a.createElement(lib.a,null,react_default.a.createElement(Search,{value:_this.state.filter,onChange:_this.onChange,onIconClick:_this.onIconClick,contextPath:_this.props.contextPath}),react_default.a.createElement(List,{apps:apps,filter:_this.state.filter})),react_default.a.createElement(style_default.a,{id:"1740460911"},["div.jsx-1740460911{z-index:10000;position:absolute;top:28px;right:-6px;border-top:4px solid transparent;}"]))},_this}return Object(inherits.a)(Apps,_React$Component),Object(createClass.a)(Apps,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("click",this.onDocClick)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("click",this.onDocClick)}},{key:"render",value:function render(){var _this2=this,apps=this.props.apps;return react_default.a.createElement("div",{ref:function ref(c){return _this2.elContainer=c},"data-test":"headerbar-apps",className:"jsx-1265754857"},react_default.a.createElement("a",{onClick:this.onToggle,"data-test":"headerbar-apps-icon",className:"jsx-1265754857"},react_default.a.createElement(Apps_Apps,{className:appIcon.className})),this.state.show&&this.AppMenu(apps),appIcon.styles,react_default.a.createElement(style_default.a,{id:"1265754857"},["a.jsx-1265754857{display:block;}","div.jsx-1265754857{position:relative;width:24px;height:30px;margin:8px 0 0 0;}"]))}}]),Apps}(react_default.a.Component);function Info(_ref){var className=_ref.className;return react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",className:className},react_default.a.createElement("path",{d:"M0 0h48v48H0z",fill:"none"}),react_default.a.createElement("path",{d:"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm2 30h-4V22h4v12zm0-16h-4v-4h4v4z"}))}function Help(_ref){var className=_ref.className;return react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",className:className},react_default.a.createElement("path",{d:"M0 0h48v48H0z",fill:"none"}),react_default.a.createElement("path",{d:"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm2 34h-4v-4h4v4zm4.13-15.49l-1.79 1.84C26.9 25.79 26 27 26 30h-4v-1c0-2.21.9-4.21 2.34-5.66l2.49-2.52C27.55 20.1 28 19.1 28 18c0-2.21-1.79-4-4-4s-4 1.79-4 4h-4c0-4.42 3.58-8 8-8s8 3.58 8 8c0 1.76-.71 3.35-1.87 4.51z"}))}function Exit(_ref){var className=_ref.className;return react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",className:className},react_default.a.createElement("path",{d:"M0 0h48v48H0z",fill:"none"}),react_default.a.createElement("path",{d:"M20.17 31.17L23 34l10-10-10-10-2.83 2.83L25.34 22H6v4h19.34l-5.17 5.17zM38 6H10c-2.21 0-4 1.79-4 4v8h4v-8h28v28H10v-8H6v8c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4z"}))}function Account(_ref){var className=_ref.className;return react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",className:className},react_default.a.createElement("path",{d:"M6 10v28c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4H10c-2.21 0-4 1.79-4 4zm24 8c0 3.32-2.69 6-6 6s-6-2.68-6-6c0-3.31 2.69-6 6-6s6 2.69 6 6zM12 34c0-4 8-6.2 12-6.2S36 30 36 34v2H12v-2z"}),react_default.a.createElement("path",{d:"M0 0h48v48H0z",fill:"none"}))}HeaderBar_Apps_Apps.__docgenInfo={description:"",methods:[{name:"onDocClick",docblock:null,modifiers:[],params:[{name:"evt",type:null}],returns:null},{name:"onToggle",docblock:null,modifiers:[],params:[],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"{ value }",type:null}],returns:null},{name:"onIconClick",docblock:null,modifiers:[],params:[],returns:null},{name:"AppMenu",docblock:null,modifiers:[],params:[{name:"apps",type:null}],returns:null}],displayName:"Apps",props:{apps:{type:{name:"custom",raw:"propTypes.array.isRequired"},required:!1,description:""},contextPath:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/Apps.js"]={name:"Apps",docgenInfo:HeaderBar_Apps_Apps.__docgenInfo,path:"src/HeaderBar/Apps.js"}),Info.__docgenInfo={description:"",methods:[],displayName:"Info",props:{className:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/Info.js"]={name:"Info",docgenInfo:Info.__docgenInfo,path:"src/icons/Info.js"}),Help.__docgenInfo={description:"",methods:[],displayName:"Help",props:{className:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/Help.js"]={name:"Help",docgenInfo:Help.__docgenInfo,path:"src/icons/Help.js"}),Exit.__docgenInfo={description:"",methods:[],displayName:"Exit",props:{className:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/Exit.js"]={name:"Exit",docgenInfo:Exit.__docgenInfo,path:"src/icons/Exit.js"}),Account.__docgenInfo={description:"",methods:[],displayName:"Account",props:{className:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/Account.js"]={name:"Account",docgenInfo:Account.__docgenInfo,path:"src/icons/Account.js"});var TextIcon_TextIcon=function TextIcon(_ref){var name=_ref.name,onClick=_ref.onClick,dataTestId=_ref.dataTestId,title=name[0];return name.indexOf(" ")>0&&(title+=name.split(" ")[1][0]),react_default.a.createElement("div",{onClick:onClick,"data-test":dataTestId,className:"jsx-1795768421"},react_default.a.createElement("p",{className:"jsx-1795768421"},title),react_default.a.createElement(style_default.a,{id:"1795768421"},["div.jsx-1795768421{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:36px;height:36px;overflow:hidden;border-radius:50%;background-color:rgba(0,0,0,0.3);color:#fff;cursor:pointer;}","p.jsx-1795768421{font-size:14px;font-weight:500;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;text-align:center;text-transform:uppercase;}"]))};TextIcon_TextIcon.defaultProps={onClick:void 0},TextIcon_TextIcon.__docgenInfo={description:"",methods:[],displayName:"TextIcon",props:{onClick:{defaultValue:{value:"undefined",computed:!0},type:{name:"custom",raw:"propTypes.func"},required:!1,description:""},name:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""},dataTestId:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/TextIcon.js"]={name:"TextIcon",docgenInfo:TextIcon_TextIcon.__docgenInfo,path:"src/HeaderBar/TextIcon.js"});var ImageIcon_ImageIcon=function ImageIcon(_ref){var src=_ref.src,onClick=_ref.onClick,dataTestId=_ref.dataTestId;return react_default.a.createElement("div",{onClick:onClick,"data-test":dataTestId,className:"jsx-4170436681"},react_default.a.createElement("img",{src:src,alt:"user avatar",className:"jsx-4170436681"}),react_default.a.createElement(style_default.a,{id:"4170436681"},["img.jsx-4170436681{max-width:100%;max-height:100%;}","div.jsx-4170436681{width:48px;height:48px;}"]))};ImageIcon_ImageIcon.defaultProps={onClick:void 0},ImageIcon_ImageIcon.__docgenInfo={description:"",methods:[],displayName:"ImageIcon",props:{onClick:{defaultValue:{value:"undefined",computed:!0},type:{name:"custom",raw:"propTypes.func"},required:!1,description:""},src:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""},dataTestId:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/ImageIcon.js"]={name:"ImageIcon",docgenInfo:ImageIcon_ImageIcon.__docgenInfo,path:"src/HeaderBar/ImageIcon.js"});var ProfileHeader_ProfileName=function ProfileName(_ref){var children=_ref.children;return react_default.a.createElement("div",{"data-test":"headerbar-profile-username",className:"jsx-2223023701"},children,react_default.a.createElement(style_default.a,{id:"2223023701"},["div.jsx-2223023701{margin-bottom:3px;font-size:16px;line-height:19px;}"]))},ProfileHeader_ProfileEmail=function ProfileEmail(_ref2){var children=_ref2.children;return react_default.a.createElement("div",{"data-test":"headerbar-profile-user-email",className:"jsx-1072768994"},children,react_default.a.createElement(style_default.a,{id:"1072768994"},["div.jsx-1072768994{margin-bottom:6px;font-size:14px;line-height:16px;}"]))},ProfileHeader_ProfileEdit=function ProfileEdit(_ref3){var children=_ref3.children,contextPath=_ref3.contextPath;return react_default.a.createElement("a",{href:"".concat(contextPath,"/dhis-web-user-profile/#/profile"),"data-test":"headerbar-profile-edit-profile-link",className:"jsx-3477773315"},children,react_default.a.createElement(style_default.a,{id:"3477773315"},["a.jsx-3477773315{color:rgba(0,0,0,0.87);font-size:12px;line-height:14px;-webkit-text-decoration:underline;text-decoration:underline;cursor:pointer;}"]))},ProfileHeader_ProfileDetails=function ProfileDetails(_ref4){var name=_ref4.name,email=_ref4.email,contextPath=_ref4.contextPath;return react_default.a.createElement("div",{className:"jsx-3814112749"},react_default.a.createElement(ProfileHeader_ProfileName,null,name),react_default.a.createElement(ProfileHeader_ProfileEmail,null,email),react_default.a.createElement(ProfileHeader_ProfileEdit,{contextPath:contextPath},d2_i18n_default.a.t("Edit profile")),react_default.a.createElement(style_default.a,{id:"3814112749"},["div.jsx-3814112749{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-left:20px;color:#000;font-size:14px;font-weight:400;}"]))},ProfileHeader_ProfileHeader=function ProfileHeader(_ref5){var name=_ref5.name,email=_ref5.email,img=_ref5.img,contextPath=_ref5.contextPath;return react_default.a.createElement("div",{className:"jsx-3625287538"},img?react_default.a.createElement(ImageIcon_ImageIcon,{src:img}):react_default.a.createElement(TextIcon_TextIcon,{name:name}),react_default.a.createElement(ProfileHeader_ProfileDetails,{name:name,email:email,contextPath:contextPath}),react_default.a.createElement(style_default.a,{id:"3625287538"},["div.jsx-3625287538{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin-left:24px;padding-top:20px;}"]))};ProfileHeader_ProfileHeader.__docgenInfo={description:"",methods:[],displayName:"ProfileHeader",props:{contextPath:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""},email:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""},img:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""},name:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/Profile/ProfileHeader.js"]={name:"ProfileHeader",docgenInfo:ProfileHeader_ProfileHeader.__docgenInfo,path:"src/HeaderBar/Profile/ProfileHeader.js"});var iconStyle={styles:react_default.a.createElement(style_default.a,{id:"2224778647"},["svg.jsx-2224778647{fill:".concat(lib.i.grey700,";cursor:pointer;height:24px;width:24px;}")]),className:"jsx-2224778647"},list=[{icon:react_default.a.createElement(Settings,{className:iconStyle.className}),label:d2_i18n_default.a.t("Settings"),value:"settings",link:"/dhis-web-user-profile/#/settings"},{icon:react_default.a.createElement(Account,{className:iconStyle.className}),label:d2_i18n_default.a.t("Account"),value:"account",link:"/dhis-web-user-profile/#/account"},{icon:react_default.a.createElement(Help,{className:iconStyle.className}),label:d2_i18n_default.a.t("Help"),value:"help",link:"https://docs.dhis2.org/master/en/user/html/dhis2_user_manual_en.html",nobase:!0},{icon:react_default.a.createElement(Info,{className:iconStyle.className}),label:d2_i18n_default.a.t("About DHIS2"),value:"about",link:"/dhis-web-user-profile/#/aboutPage"},{icon:react_default.a.createElement(Exit,{className:iconStyle.className}),label:d2_i18n_default.a.t("Logout"),value:"logout",link:"/dhis-web-commons-security/logout.action"}],ProfileMenu_ProfileContents=function ProfileContents(_ref){var name=_ref.name,email=_ref.email,avatar=_ref.avatar,contextPath=_ref.contextPath;return react_default.a.createElement(lib.a,null,react_default.a.createElement("div",{className:"jsx-374793399"},react_default.a.createElement(ProfileHeader_ProfileHeader,{name:name,email:email,img:avatar,contextPath:contextPath}),react_default.a.createElement(lib.d,{margin:"13px 0 7px 0"}),react_default.a.createElement("ul",{"data-test":"headerbar-profile-menu",className:"jsx-374793399"},list.map((function(_ref2){var label=_ref2.label,value=_ref2.value,icon=_ref2.icon,link=_ref2.link,nobase=_ref2.nobase;return react_default.a.createElement(lib.g,{href:nobase?link:"".concat(contextPath).concat(link),key:"h-mi-".concat(value),label:label,value:value,icon:icon})})))),iconStyle.styles,react_default.a.createElement(style_default.a,{id:"374793399"},["div.jsx-374793399{width:100%;padding:0;}","ul.jsx-374793399{padding:0;margin:0;}","a.jsx-374793399,a.jsx-374793399:hover,a.jsx-374793399:focus,a.jsx-374793399:active,a.jsx-374793399:visited{-webkit-text-decoration:none;text-decoration:none;display:block;}"]))},ProfileMenu_ProfileMenu=function ProfileMenu(_ref3){var avatar=_ref3.avatar,name=_ref3.name,email=_ref3.email,contextPath=_ref3.contextPath;return react_default.a.createElement("div",{"data-test":"headerbar-profile-menu",className:"jsx-3620236321"},react_default.a.createElement(ProfileMenu_ProfileContents,{name:name,email:email,avatar:avatar,contextPath:contextPath}),react_default.a.createElement(style_default.a,{id:"3620236321"},["div.jsx-3620236321{z-index:10000;position:absolute;top:34px;right:-6px;width:310px;border-top:4px solid transparent;}"]))};function avatarPath(avatar,contextPath){return avatar?"".concat(contextPath,"/api/fileResources/").concat(avatar.id,"/data"):null}ProfileMenu_ProfileMenu.__docgenInfo={description:"",methods:[],displayName:"ProfileMenu",props:{avatar:{type:{name:"custom",raw:"propTypes.element"},required:!1,description:""},contextPath:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""},email:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""},name:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/Profile/ProfileMenu.js"]={name:"ProfileMenu",docgenInfo:ProfileMenu_ProfileMenu.__docgenInfo,path:"src/HeaderBar/Profile/ProfileMenu.js"});var Profile_Profile=function(_React$Component){function Profile(){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,Profile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(Profile)).call.apply(_getPrototypeOf2,[this].concat(args)))).state={show:!1},_this.onDocClick=function(evt){_this.elContainer&&!_this.elContainer.contains(evt.target)&&_this.setState({show:!1})},_this.onToggle=function(){return _this.setState({show:!_this.state.show})},_this}return Object(inherits.a)(Profile,_React$Component),Object(createClass.a)(Profile,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("click",this.onDocClick)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("click",this.onDocClick)}},{key:"userIcon",value:function userIcon(me,contextPath){var avatar=avatarPath(me.avatar,contextPath);return avatar?react_default.a.createElement(ImageIcon_ImageIcon,{src:avatar,onClick:this.onToggle,dataTestId:"headerbar-profile-icon-image"}):react_default.a.createElement(TextIcon_TextIcon,{name:me.name,onClick:this.onToggle,dataTestId:"headerbar-profile-icon-text"})}},{key:"render",value:function render(){var _this2=this,_this$props=this.props,user=_this$props.user,contextPath=_this$props.contextPath;return react_default.a.createElement("div",{ref:function ref(c){return _this2.elContainer=c},"data-test":"headerbar-profile",className:"jsx-661915851"},this.userIcon(user,contextPath),this.state.show?react_default.a.createElement(ProfileMenu_ProfileMenu,{avatar:avatarPath(user.avatar,contextPath),name:user.name,email:user.email,contextPath:contextPath}):null,react_default.a.createElement(style_default.a,{id:"661915851"},["div.jsx-661915851{position:relative;width:36px;height:36px;margin:2px 12px 0 24px;}"]))}}]),Profile}(react_default.a.Component);Profile_Profile.__docgenInfo={description:"",methods:[{name:"onDocClick",docblock:null,modifiers:[],params:[{name:"evt",type:null}],returns:null},{name:"onToggle",docblock:null,modifiers:[],params:[],returns:null},{name:"userIcon",docblock:null,modifiers:[],params:[{name:"me",type:null},{name:"contextPath",type:null}],returns:null}],displayName:"Profile",props:{contextPath:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""},user:{type:{name:"custom",raw:"propTypes.object.isRequired"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/Profile.js"]={name:"Profile",docgenInfo:Profile_Profile.__docgenInfo,path:"src/HeaderBar/Profile.js"});var es=__webpack_require__(18),logoStyles={styles:react_default.a.createElement(style_default.a,{id:"3467673193"},["svg.jsx-3467673193{height:25px;width:27px;}","img.jsx-3467673193{max-height:100%;min-height:auto;width:auto;}"]),className:"jsx-3467673193"},query={customLogo:{resource:"staticContent/logo_banner"}},LogoImage_LogoImage=function LogoImage(){var Logo,_useDataQuery=Object(es.c)(query),loading=_useDataQuery.loading,error=_useDataQuery.error,data=_useDataQuery.data;return loading?null:(Logo=!error&&function pathExists(data){return data&&data.customLogo&&data.customLogo.images&&data.customLogo.images.png}(data)?react_default.a.createElement("img",{alt:"Headerbar Logo",src:data.customLogo.images.png,className:logoStyles.className}):react_default.a.createElement(lib.f,{className:logoStyles.className}),react_default.a.createElement("div",{className:"jsx-3930434724"},Logo,logoStyles.styles,react_default.a.createElement(style_default.a,{id:"3930434724"},["div.jsx-3930434724{padding:4px;min-width:48px;max-width:250px;height:48px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;}"])))};LogoImage_LogoImage.__docgenInfo={description:"",methods:[],displayName:"LogoImage"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/LogoImage.js"]={name:"LogoImage",docgenInfo:LogoImage_LogoImage.__docgenInfo,path:"src/HeaderBar/LogoImage.js"});var Logo_Logo=function Logo(_ref){var baseUrl=_ref.baseUrl;return react_default.a.createElement("div",{"data-test":"headerbar-logo",className:"jsx-3075771711"},react_default.a.createElement("a",{href:baseUrl,className:"jsx-3075771711"},react_default.a.createElement(LogoImage_LogoImage,null)),react_default.a.createElement(style_default.a,{id:"3075771711"},["div.jsx-3075771711{box-sizing:border-box;min-width:49px;max-height:48px;margin:0 12px 0 0;border-right:1px solid rgba(32,32,32,0.15);}","a.jsx-3075771711,a.jsx-3075771711:hover,a.jsx-3075771711:focus,a.jsx-3075771711:active,a.jsx-3075771711:visited{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]))};Logo_Logo.__docgenInfo={description:"",methods:[],displayName:"Logo",props:{baseUrl:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/Logo.js"]={name:"Logo",docgenInfo:Logo_Logo.__docgenInfo,path:"src/HeaderBar/Logo.js"});var Title_Title=function Title(_ref){var app=_ref.app,instance=_ref.instance;return react_default.a.createElement("div",{"data-test":"headerbar-title",className:"jsx-2721515324"},app?"".concat(instance," - ").concat(app):"".concat(instance),react_default.a.createElement(style_default.a,{id:"2721515324"},["div.jsx-2721515324{overflow:hidden;text-overflow:ellipsis;font-size:14px;font-weight:500;-webkit-letter-spacing:0.01em;-moz-letter-spacing:0.01em;-ms-letter-spacing:0.01em;letter-spacing:0.01em;white-space:nowrap;}"]))};function Email(_ref){var className=_ref.className;return react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",className:className},react_default.a.createElement("path",{d:"M40 8H8c-2.21 0-3.98 1.79-3.98 4L4 36c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 8L24 26 8 16v-4l16 10 16-10v4z"}),react_default.a.createElement("path",{d:"M0 0h48v48H0z",fill:"none"}))}function Message(_ref){var className=_ref.className;return react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",className:className},react_default.a.createElement("path",{d:"M40 4H8C5.79 4 4.02 5.79 4.02 8L4 44l8-8h28c2.21 0 4-1.79 4-4V8c0-2.21-1.79-4-4-4zm-4 24H12v-4h24v4zm0-6H12v-4h24v4zm0-6H12v-4h24v4z"}),react_default.a.createElement("path",{d:"M0 0h48v48H0z",fill:"none"}))}Title_Title.__docgenInfo={description:"",methods:[],displayName:"Title",props:{app:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""},instance:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/Title.js"]={name:"Title",docgenInfo:Title_Title.__docgenInfo,path:"src/HeaderBar/Title.js"}),Email.__docgenInfo={description:"",methods:[],displayName:"Email",props:{className:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/Email.js"]={name:"Email",docgenInfo:Email.__docgenInfo,path:"src/icons/Email.js"}),Message.__docgenInfo={description:"",methods:[],displayName:"Message",props:{className:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/Message.js"]={name:"Message",docgenInfo:Message.__docgenInfo,path:"src/icons/Message.js"});var messageIcon={styles:react_default.a.createElement(style_default.a,{id:"255544020"},["svg.jsx-255544020{fill:".concat(lib.i.white,";cursor:pointer;height:24px;width:24px;}")]),className:"jsx-255544020"},interpretationIcon={styles:react_default.a.createElement(style_default.a,{id:"255544020"},["svg.jsx-255544020{fill:".concat(lib.i.white,";cursor:pointer;height:24px;width:24px;}")]),className:"jsx-255544020"};var NotificationIcon_NotificationIcon=function NotificationIcon(_ref){var count=_ref.count,href=_ref.href,kind=_ref.kind,dataTestId=_ref.dataTestId;return react_default.a.createElement("a",{href:href,"data-test":dataTestId,className:style_default.a.dynamic([["1854025327",[lib.k.secondary300]]])+" "+(kind||"")},function NotificationIcon_icon(kind){return"message"===kind?react_default.a.createElement(Message,{className:messageIcon.className},messageIcon.styles):react_default.a.createElement(Email,{className:interpretationIcon.className},interpretationIcon.styles)}(kind),count>0&&react_default.a.createElement("span",{"data-test":"".concat(dataTestId,"-count"),className:style_default.a.dynamic([["1854025327",[lib.k.secondary300]]])},count),react_default.a.createElement(style_default.a,{id:"1854025327",dynamic:[lib.k.secondary300]},["a.__jsx-style-dynamic-selector{position:relative;margin:8px 24px 0 0;cursor:pointer;}","span.__jsx-style-dynamic-selector{z-index:1;position:absolute;top:-6px;right:-10px;width:16px;height:16px;border-radius:50%;background-color:".concat(lib.k.secondary300,";color:#fff;font-size:9px;font-weight:500;line-height:16px;text-align:center;cursor:inherit;}")]))};NotificationIcon_NotificationIcon.defaultProps={count:0},NotificationIcon_NotificationIcon.__docgenInfo={description:"",methods:[],displayName:"NotificationIcon",props:{count:{defaultValue:{value:"0",computed:!1},type:{name:"custom",raw:"propTypes.number"},required:!1,description:""},href:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""},dataTestId:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""},kind:{type:{name:"custom",raw:"propTypes.oneOf(['interpretation', 'message'])"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/NotificationIcon.js"]={name:"NotificationIcon",docgenInfo:NotificationIcon_NotificationIcon.__docgenInfo,path:"src/HeaderBar/NotificationIcon.js"});var Notifications_Notifications=function Notifications(_ref){var interpretations=_ref.interpretations,messages=_ref.messages,contextPath=_ref.contextPath;return react_default.a.createElement("div",{"data-test":"headerbar-notifications",className:"jsx-1272882457"},react_default.a.createElement(NotificationIcon_NotificationIcon,{count:interpretations,href:"".concat(contextPath,"/dhis-web-interpretation"),kind:"message",dataTestId:"headerbar-interpretations"}),react_default.a.createElement(NotificationIcon_NotificationIcon,{message:"email",count:messages,href:"".concat(contextPath,"/dhis-web-messaging"),kind:"interpretation",dataTestId:"headerbar-messages"}),react_default.a.createElement(style_default.a,{id:"1272882457"},["div.jsx-1272882457{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}"]))};Notifications_Notifications.__docgenInfo={description:"",methods:[],displayName:"Notifications",props:{contextPath:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""},interpretations:{type:{name:"custom",raw:"propTypes.number"},required:!1,description:""},messages:{type:{name:"custom",raw:"propTypes.number"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar/Notifications.js"]={name:"Notifications",docgenInfo:Notifications_Notifications.__docgenInfo,path:"src/HeaderBar/Notifications.js"}),__webpack_require__.d(__webpack_exports__,"a",(function(){return HeaderBar_HeaderBar}));var HeaderBar_query={systemInfo:{resource:"system/info"},user:{resource:"me"},apps:{resource:"action::menu/getModules"},notifications:{resource:"me/dashboard"}},HeaderBar_HeaderBar=function HeaderBar(_ref){var appName=_ref.appName,className=_ref.className,_useDataQuery=Object(es.c)(HeaderBar_query),loading=_useDataQuery.loading,error=_useDataQuery.error,data=_useDataQuery.data;if(Object(react.useEffect)((function(){var getPath=function getPath(path){return path.startsWith("http:")||path.startsWith("https:")?path:"".concat(data.systemInfo.contextPath,"/api/").concat(path)};loading||error||data.apps.modules.forEach((function(app){app.icon=getPath(app.icon),app.defaultAction=getPath(app.defaultAction)}))}),[data]),!loading&&!error){var locale=data.user.settings.keyUiLocale||"en";d2_i18n_default.a.changeLanguage(locale)}return react_default.a.createElement("header",{className:style_default.a.dynamic([["1335571883",[lib.i.white]]])+" "+(className||"")},!loading&&!error&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Logo_Logo,{baseUrl:data.systemInfo.contextPath}),react_default.a.createElement(Title_Title,{app:appName,instance:data.systemInfo.systemName}),react_default.a.createElement("div",{className:style_default.a.dynamic([["1335571883",[lib.i.white]]])+" right-control-spacer"}),react_default.a.createElement(Notifications_Notifications,{interpretations:data.notifications.unreadInterpretations,messages:data.notifications.unreadMessageConversations,contextPath:data.systemInfo.contextPath}),react_default.a.createElement(HeaderBar_Apps_Apps,{apps:data.apps.modules,contextPath:data.systemInfo.contextPath}),react_default.a.createElement(Profile_Profile,{user:data.user,contextPath:data.systemInfo.contextPath})),react_default.a.createElement(style_default.a,{id:"1335571883",dynamic:[lib.i.white]},["header.__jsx-style-dynamic-selector{background-color:#2c6693;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:48px;border-bottom:1px solid rgba(32,32,32,0.15);color:".concat(lib.i.white,";}"),".right-control-spacer.__jsx-style-dynamic-selector{margin-left:auto;}"]))};HeaderBar_HeaderBar.__docgenInfo={description:"",methods:[],displayName:"HeaderBar",props:{appName:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""},className:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/HeaderBar.js"]={name:"HeaderBar",docgenInfo:HeaderBar_HeaderBar.__docgenInfo,path:"src/HeaderBar.js"})},24:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(1),react_default=__webpack_require__.n(react),style=__webpack_require__(2),style_default=__webpack_require__.n(style),lib=__webpack_require__(3),d2_i18n=__webpack_require__(23),d2_i18n_default=__webpack_require__.n(d2_i18n),ErrorMessage_ErrorMessage=function ErrorMessage(_ref){var children=_ref.children,dataTest=_ref.dataTest;return react_default.a.createElement("span",{"data-test":"".concat(dataTest,"-error"),className:style_default.a.dynamic([["3198585030",[lib.i.grey800,lib.j.dp4,lib.k.error]]])},children,react_default.a.createElement(style_default.a,{id:"3198585030",dynamic:[lib.i.grey800,lib.j.dp4,lib.k.error]},["span.__jsx-style-dynamic-selector{font-size:14px;color:".concat(lib.i.grey800,";margin:").concat(lib.j.dp4,";color:").concat(lib.k.error,";}")]))};ErrorMessage_ErrorMessage.__docgenInfo={description:"",methods:[],displayName:"ErrorMessage",props:{children:{type:{name:"any"},required:!0,description:""},dataTest:{type:{name:"string"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OrganisationUnitTree/ErrorMessage.js"]={name:"ErrorMessage",docgenInfo:ErrorMessage_ErrorMessage.__docgenInfo,path:"src/OrganisationUnitTree/ErrorMessage.js"});var toConsumableArray=__webpack_require__(28),classnames=__webpack_require__(4),classnames_default=__webpack_require__.n(classnames),FolderOpen_FolderOpen=function FolderOpen(_ref){var dataTest=_ref.dataTest;return react_default.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":"".concat(dataTest,"-iconfolderopen"),className:"jsx-2091325045"},react_default.a.createElement("g",{id:"icon/folder/open",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-2091325045"},react_default.a.createElement("g",{id:"Group",transform:"translate(0.000000, 3.000000)",stroke:"#6E7A8A",className:"jsx-2091325045"},react_default.a.createElement("path",{d:"M2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,10 C0.5,10.8284271 1.17157288,11.5 2,11.5 L12,11.5 C12.8284271,11.5 13.5,10.8284271 13.5,10 L13.5,4 C13.5,3.17157288 12.8284271,2.5 12,2.5 L6.69098301,2.5 L5.82917961,0.776393202 C5.7444836,0.607001188 5.57135204,0.5 5.38196601,0.5 L2,0.5 Z",id:"Path-2",fill:"#A0ADBA",className:"jsx-2091325045"}),react_default.a.createElement("path",{d:"M1.53632259,10.7093809 C1.47575089,10.7941813 1.44318932,10.8957885 1.44318932,11 C1.44318932,11.2761424 1.66704695,11.5 1.94318932,11.5 L12.4853821,11.5 C12.6468577,11.5 12.7983931,11.4220172 12.8922488,11.2906191 L16.4636774,6.2906191 C16.5242491,6.20581872 16.5568107,6.10421149 16.5568107,6 C16.5568107,5.72385763 16.3329531,5.5 16.0568107,5.5 L5.5146179,5.5 C5.35314234,5.5 5.20160692,5.57798284 5.10775116,5.7093809 L1.53632259,10.7093809 Z",id:"Path-3",fill:"#FBFCFD",className:"jsx-2091325045"}))),react_default.a.createElement(style_default.a,{id:"2091325045"},["svg.jsx-2091325045{margin:3px 0;display:block;}"]))};FolderOpen_FolderOpen.__docgenInfo={description:"@module\n@returns {React.Component}",methods:[],displayName:"FolderOpen",props:{dataTest:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OrganisationUnitTree/icons/FolderOpen.js"]={name:"FolderOpen",docgenInfo:FolderOpen_FolderOpen.__docgenInfo,path:"src/OrganisationUnitTree/icons/FolderOpen.js"});var FolderClosed_FolderClosed=function FolderClosed(_ref){var dataTest=_ref.dataTest;return react_default.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1","data-test":"".concat(dataTest,"-iconfolderclosed"),className:"jsx-3201893673"},react_default.a.createElement("g",{id:"icon/folder/closed",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-3201893673"},react_default.a.createElement("path",{d:"M2,3.5 C1.17157288,3.5 0.5,4.17157288 0.5,5 L0.5,13 C0.5,13.8284271 1.17157288,14.5 2,14.5 L12,14.5 C12.8284271,14.5 13.5,13.8284271 13.5,13 L13.5,7 C13.5,6.17157288 12.8284271,5.5 12,5.5 L6.69098301,5.5 L5.82917961,3.7763932 C5.7444836,3.60700119 5.57135204,3.5 5.38196601,3.5 L2,3.5 Z",id:"Path-2",stroke:"#6E7A8A",fill:"#D5DDE5",className:"jsx-3201893673"})),react_default.a.createElement(style_default.a,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};FolderClosed_FolderClosed.__docgenInfo={description:"@module\n@returns {React.Component}",methods:[],displayName:"FolderClosed",props:{dataTest:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OrganisationUnitTree/icons/FolderClosed.js"]={name:"FolderClosed",docgenInfo:FolderClosed_FolderClosed.__docgenInfo,path:"src/OrganisationUnitTree/icons/FolderClosed.js"});var Single_Single=function Single(_ref){var dataTest=_ref.dataTest;return react_default.a.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":"".concat(dataTest,"-iconsingle"),className:"jsx-3201893673"},react_default.a.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/single",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"},react_default.a.createElement("rect",{fill:"#A0ADBA",height:"4",id:"Rectangle",rx:"1",width:"4",x:"7",y:"7",className:"jsx-3201893673"})),react_default.a.createElement(style_default.a,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};Single_Single.__docgenInfo={description:"@module\n@returns {React.Component}",methods:[],displayName:"Single",props:{dataTest:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OrganisationUnitTree/icons/Single.js"]={name:"Single",docgenInfo:Single_Single.__docgenInfo,path:"src/OrganisationUnitTree/icons/Single.js"});var Empty_Empty=function Empty(_ref){var dataTest=_ref.dataTest;return react_default.a.createElement("svg",{height:"18px",version:"1.1",viewBox:"0 0 18 18",width:"18px","data-test":"".concat(dataTest,"-iconempty"),className:"jsx-3201893673"},react_default.a.createElement("g",{fill:"none",fillRule:"evenodd",id:"icon/empty",stroke:"none",strokeWidth:"1",className:"jsx-3201893673"}),react_default.a.createElement(style_default.a,{id:"3201893673"},["svg.jsx-3201893673{display:block;margin:3px 0;}"]))};Empty_Empty.__docgenInfo={description:"@module\n@returns {React.Component}",methods:[],displayName:"Empty",props:{dataTest:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OrganisationUnitTree/icons/Empty.js"]={name:"Empty",docgenInfo:Empty_Empty.__docgenInfo,path:"src/OrganisationUnitTree/icons/Empty.js"});var Label_DisabledSelectionLabel=function DisabledSelectionLabel(_ref){var label=_ref.label,loading=_ref.loading,onToggleOpen=_ref.onToggleOpen;return react_default.a.createElement(Label_SingleSelectionLabel,{checked:!1,loading:loading,label:label,onChange:onToggleOpen})},Label_SingleSelectionLabel=function SingleSelectionLabel(_ref2){var checked=_ref2.checked,label=_ref2.label,onChange=_ref2.onChange,loading=_ref2.loading;return react_default.a.createElement("span",{onClick:function onClick(event){onChange({checked:!checked},event)},className:style_default.a.dynamic([["321503310",[lib.i.grey900,lib.i.teal700]]])+" "+(classnames_default()({checked:checked,loading:loading})||"")},label,react_default.a.createElement(style_default.a,{id:"321503310",dynamic:[lib.i.grey900,lib.i.teal700]},["span.__jsx-style-dynamic-selector{background:transparent;border-radius:3px;color:".concat(lib.i.grey900,";cursor:pointer;display:inline-block;font-size:14px;line-height:24px;padding:0 5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;}"),".checked.__jsx-style-dynamic-selector{background:".concat(lib.i.teal700,";color:white;}"),".loading.__jsx-style-dynamic-selector{cursor:auto;}"]))},Label_LabelContainer=function LabelContainer(_ref3){var highlighted=_ref3.highlighted,children=_ref3.children;return react_default.a.createElement("div",{className:style_default.a.dynamic([["495975020",[lib.i.teal200]]])+" "+(classnames_default()({highlighted:highlighted})||"")},react_default.a.createElement("span",{className:style_default.a.dynamic([["495975020",[lib.i.teal200]]])},children),react_default.a.createElement(style_default.a,{id:"495975020",dynamic:[lib.i.teal200]},["div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","span.__jsx-style-dynamic-selector{display:block;}",".highlighted.__jsx-style-dynamic-selector{background:".concat(lib.i.teal200,";padding-right:4px;}")]))},Label_Icon=function Icon(_ref4){var loading=_ref4.loading,hasChildren=_ref4.hasChildren,open=_ref4.open,dataTest=_ref4.dataTest;return loading?react_default.a.createElement(Empty_Empty,{dataTest:dataTest}):hasChildren?open?react_default.a.createElement(FolderOpen_FolderOpen,{dataTest:dataTest}):react_default.a.createElement(FolderClosed_FolderClosed,{dataTest:dataTest}):react_default.a.createElement(Single_Single,{dataTest:dataTest})},Label_IconizedCheckbox=function IconizedCheckbox(_ref5){var checked=_ref5.checked,dataTest=_ref5.dataTest,hasChildren=_ref5.hasChildren,indeterminate=_ref5.indeterminate,label=_ref5.label,loading=_ref5.loading,name=_ref5.name,open=_ref5.open,value=_ref5.value,onChange=_ref5.onChange,icon=react_default.a.createElement(Label_Icon,{loading:loading,open:open,hasChildren:hasChildren,dataTest:dataTest}),checkboxLabel=react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("span",{className:"jsx-3097236308"},icon),label,react_default.a.createElement(style_default.a,{id:"3097236308"},["span.jsx-3097236308{display:inline-block;margin-right:4px;}"]));return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(lib.b,{dense:!0,checked:checked,name:name,value:value,label:checkboxLabel,indeterminate:indeterminate,onChange:onChange}))},Label_Label=function Label(_ref7){var id=_ref7.id,path=_ref7.path,open=_ref7.open,loading=_ref7.loading,checked=_ref7.checked,onChange=_ref7.onChange,dataTest=_ref7.dataTest,selected=_ref7.selected,hasChildren=_ref7.hasChildren,highlighted=_ref7.highlighted,displayName=_ref7.displayName,onToggleOpen=_ref7.onToggleOpen,disableSelection=_ref7.disableSelection,singleSelection=_ref7.singleSelection,hasSelectedDescendants=_ref7.hasSelectedDescendants,onClick=function onClick(_ref8,event){var checked=_ref8.checked,newSelected=function createNewSelected(_ref6){var selected=_ref6.selected,path=_ref6.path,checked=_ref6.checked,singleSelection=_ref6.singleSelection,pathIndex=selected.indexOf(path);if(checked&&-1!==pathIndex)return selected;if(singleSelection&&checked)return[path];if(checked)return[].concat(Object(toConsumableArray.a)(selected),[path]);if(-1===pathIndex)return selected;if(singleSelection)return[];if(0===selected.indexOf(path))return selected.slice(1);var prevSlice=selected.slice(0,pathIndex),nextSlice=selected.slice(pathIndex+1);return[].concat(Object(toConsumableArray.a)(prevSlice),Object(toConsumableArray.a)(nextSlice))}({selected:selected,path:path,checked:checked,singleSelection:singleSelection});onChange({id:id,path:path,checked:checked,selected:newSelected},event)};return disableSelection?react_default.a.createElement(Label_LabelContainer,{highlighted:highlighted},react_default.a.createElement(Label_DisabledSelectionLabel,{label:displayName,loading:loading,onToggleOpen:onToggleOpen})):singleSelection?react_default.a.createElement(Label_LabelContainer,{highlighted:highlighted},react_default.a.createElement(Label_SingleSelectionLabel,{checked:checked,label:displayName,onChange:onClick,loading:loading},displayName)):react_default.a.createElement(Label_LabelContainer,{highlighted:highlighted},react_default.a.createElement(Label_IconizedCheckbox,{dataTest:dataTest,checked:checked,name:"org-unit",value:id,label:displayName,loading:loading,indeterminate:!checked&&hasSelectedDescendants,onChange:onClick,open:open,hasChildren:hasChildren}))};Label_Label.__docgenInfo={description:"@module\n@param {Label.PropTypes} props\n@returns {React.Component}",methods:[],displayName:"Label",props:{dataTest:{type:{name:"string"},required:!0,description:""},displayName:{type:{name:"string"},required:!0,description:""},hasChildren:{type:{name:"bool"},required:!0,description:""},id:{type:{name:"string"},required:!0,description:""},loading:{type:{name:"bool"},required:!0,description:""},open:{type:{name:"bool"},required:!0,description:""},path:{type:{name:"string"},required:!0,description:""},onChange:{type:{name:"func"},required:!0,description:""},onToggleOpen:{type:{name:"func"},required:!0,description:""},checked:{type:{name:"bool"},required:!1,description:""},disableSelection:{type:{name:"bool"},required:!1,description:""},hasSelectedDescendants:{type:{name:"bool"},required:!1,description:""},highlighted:{type:{name:"bool"},required:!1,description:""},selected:{type:{name:"arrayOf",value:{name:"custom",raw:"orgUnitPathPropType"}},required:!1,description:""},singleSelection:{type:{name:"bool"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OrganisationUnitTree/Label.js"]={name:"Label",docgenInfo:Label_Label.__docgenInfo,path:"src/OrganisationUnitTree/Label.js"});var computeChildNodes=function computeChildNodes(node,filter){return filter.length?node.children.filter((function(child){return function isPathIncluded(includedPaths,path){return includedPaths.some((function(includedPath){return path===includedPath||0===includedPath.indexOf("".concat(path,"/"))}))}(filter,"".concat(node.path,"/").concat(child.id))})):node.children},slicedToArray=__webpack_require__(27),es=__webpack_require__(18),defineProperty=__webpack_require__(81),objectSpread2=__webpack_require__(26),helpers_createQuery=function createQuery(ids){return ids.reduce((function(query,id){return Object(objectSpread2.a)({},query,Object(defineProperty.a)({},id,function createOrgUnitQuery(id){return{resource:"organisationUnits/".concat(id),params:function params(_ref){var withChildren=_ref.withChildren;return{isUserDataViewFallback:_ref.isUserDataViewFallback,fields:withChildren?"children[path,displayName,id],displayName,path,id":"displayName,path,id",paging:!1}}}}(id)))}),{})},helpers_addMissingDisplayNameProps=function addMissingDisplayNameProps(nodes){return function fromEntries(entries){return entries.reduce((function(collection,_ref){var _ref2=Object(slicedToArray.a)(_ref,2),key=_ref2[0],name=_ref2[1];return Object(objectSpread2.a)({},collection,Object(defineProperty.a)({},key,name))}),{})}(Object.entries(nodes).map((function(_ref2){var _ref3=Object(slicedToArray.a)(_ref2,2),id=_ref3[0],node=_ref3[1],displayName=node.displayName||"";return[id,Object(objectSpread2.a)({},node,{displayName:displayName})]})))},useOrgData_useOrgData=function useOrgData(ids){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$withChildren=_ref.withChildren,withChildren=void 0===_ref$withChildren||_ref$withChildren,isUserDataViewFallback=_ref.isUserDataViewFallback,query=helpers_createQuery(ids),variables={withChildren:withChildren,isUserDataViewFallback:isUserDataViewFallback},_useDataQuery=Object(es.c)(query,{variables:variables}),loading=_useDataQuery.loading,error=_useDataQuery.error,data=_useDataQuery.data,refetch=_useDataQuery.refetch,nodes=data?helpers_addMissingDisplayNameProps(data):{};return{loading:loading,error:error,data:nodes,refetch:refetch}},loadingSpinnerStyles={styles:react_default.a.createElement(style_default.a,{id:"1427691812"},[".small.jsx-1427691812{display:block;margin:3px 0;width:18px;height:18px;}"]),className:"jsx-1427691812"},OrganisationUnitNode_LoadingSpinner=function LoadingSpinner(){return react_default.a.createElement("div",{className:"jsx-2503342345"},react_default.a.createElement(lib.c,{small:!0,className:loadingSpinnerStyles.className}),react_default.a.createElement("style",null,loadingSpinnerStyles.styles),react_default.a.createElement(style_default.a,{id:"2503342345"},["div.jsx-2503342345{width:24px;}"]))},OrganisationUnitNode_OrganisationUnitNode=function OrganisationUnitNode(_ref){var autoExpandLoadingError=_ref.autoExpandLoadingError,dataTest=_ref.dataTest,disableSelection=_ref.disableSelection,displayName=_ref.displayName,expanded=_ref.expanded,highlighted=_ref.highlighted,id=_ref.id,isUserDataViewFallback=_ref.isUserDataViewFallback,path=_ref.path,selected=_ref.selected,singleSelection=_ref.singleSelection,filter=_ref.filter,onChange=_ref.onChange,onChildrenLoaded=_ref.onChildrenLoaded,onCollapse=_ref.onCollapse,onExpand=_ref.onExpand,_useOrgData=useOrgData_useOrgData([id],{isUserDataViewFallback:isUserDataViewFallback}),loading=_useOrgData.loading,error=_useOrgData.error,data=_useOrgData.data,childNodes=loading||error?[]:computeChildNodes(data[id],filter),hasChildren=!!childNodes.length,hasSelectedDescendants=function hasDescendantSelectedPaths(path,selected){return selected.some((function(selectedPath){return selectedPath!==path&&0===selectedPath.indexOf(path)}))}(path,selected),isHighlighted=highlighted.includes(path),_useOpenState=function useOpenState(_ref){var path=_ref.path,expanded=_ref.expanded,onExpand=_ref.onExpand,onCollapse=_ref.onCollapse,errorMessage=_ref.errorMessage,autoExpand=_ref.autoExpandLoadingError&&!!errorMessage,_useState=Object(react.useState)(!!errorMessage),_useState2=Object(slicedToArray.a)(_useState,2),openedOnceDueToError=_useState2[0],setOpenedOnce=_useState2[1],_useState3=Object(react.useState)(autoExpand||expanded.includes(path)),_useState4=Object(slicedToArray.a)(_useState3,2),open=_useState4[0],setOpen=_useState4[1];Object(react.useEffect)((function(){autoExpand&&!openedOnceDueToError&&(setOpen(!0),setOpenedOnce(!0))}),[autoExpand,openedOnceDueToError]);return{open:open,onToggleOpen:function onToggleOpen(){var newOpen=!open,payload={path:path};setOpen(newOpen),onExpand&&newOpen?onExpand(payload):onCollapse&&!newOpen&&onCollapse(payload)}}}({autoExpandLoadingError:autoExpandLoadingError,errorMessage:error&&error.toString(),path:path,expanded:expanded,onExpand:onExpand,onCollapse:onCollapse}),open=_useOpenState.open,onToggleOpen=_useOpenState.onToggleOpen,isSelected=selected.includes(path);Object(react.useEffect)((function(){loading||error||!onChildrenLoaded||onChildrenLoaded(data)}),[loading,error,onChildrenLoaded]);var label=react_default.a.createElement(Label_Label,{checked:isSelected,dataTest:"".concat(dataTest,"-label"),disableSelection:disableSelection,displayName:displayName,hasChildren:hasChildren,hasSelectedDescendants:hasSelectedDescendants,highlighted:isHighlighted,id:id,loading:loading,onChange:onChange,selected:selected,onToggleOpen:onToggleOpen,open:open,path:path,singleSelection:singleSelection}),showPlaceholder=hasChildren&&!open&&!error,showChildNodes=hasChildren&&open&&!error;return react_default.a.createElement(lib.h,{dataTest:"".concat(dataTest,"-node"),open:open,onOpen:onToggleOpen,onClose:onToggleOpen,component:label,icon:loading&&react_default.a.createElement(OrganisationUnitNode_LoadingSpinner,null)},error&&react_default.a.createElement(ErrorMessage_ErrorMessage,{dataTest:dataTest},d2_i18n_default.a.t("Could not load children")),showPlaceholder&&react_default.a.createElement("span",{"data-test":"".concat(dataTest,"-placeholder")}),showChildNodes&&childNodes.map((function(child){var childPath="".concat(path,"/").concat(child.id),grandChildNodes=computeChildNodes(child,filter);return react_default.a.createElement(OrganisationUnitNode,{key:childPath,autoExpandLoadingError:autoExpandLoadingError,childNodes:grandChildNodes,dataTest:dataTest,disableSelection:disableSelection,displayName:child.displayName,expanded:expanded,filter:filter,highlighted:highlighted,id:child.id,isUserDataViewFallback:isUserDataViewFallback,path:childPath,selected:selected,singleSelection:singleSelection,onChange:onChange,onChildrenLoaded:onChildrenLoaded,onCollapse:onCollapse,onExpand:onExpand})})))};OrganisationUnitNode_OrganisationUnitNode.__docgenInfo={description:"",methods:[],displayName:"OrganisationUnitNode",props:{dataTest:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""},id:{type:{name:"custom",raw:"propTypes.string.isRequired"},required:!1,description:""},onChange:{type:{name:"custom",raw:"propTypes.func.isRequired"},required:!1,description:""},autoExpandLoadingError:{type:{name:"custom",raw:"propTypes.bool"},required:!1,description:""},disableSelection:{type:{name:"custom",raw:"propTypes.bool"},required:!1,description:""},displayName:{type:{name:"custom",raw:"propTypes.string"},required:!1,description:""},expanded:{type:{name:"custom",raw:"propTypes.arrayOf(orgUnitPathPropType)"},required:!1,description:""},filter:{type:{name:"custom",raw:"propTypes.arrayOf(orgUnitPathPropType)"},required:!1,description:""},hasChildren:{type:{name:"custom",raw:"propTypes.bool"},required:!1,description:"The parent already knows whether this node has children or not\nbefore we load the children's details, so we can use this information\neven during the loading phase"},highlighted:{type:{name:"custom",raw:"propTypes.arrayOf(orgUnitPathPropType)"},required:!1,description:""},isUserDataViewFallback:{type:{name:"custom",raw:"propTypes.bool"},required:!1,description:""},path:{type:{name:"custom",raw:"orgUnitPathPropType"},required:!1,description:""},selected:{type:{name:"custom",raw:"propTypes.arrayOf(orgUnitPathPropType)"},required:!1,description:""},singleSelection:{type:{name:"custom",raw:"propTypes.bool"},required:!1,description:""},onCollapse:{type:{name:"custom",raw:"propTypes.func"},required:!1,description:""},onExpand:{type:{name:"custom",raw:"propTypes.func"},required:!1,description:""},onChildrenLoaded:{type:{name:"custom",raw:"propTypes.func"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OrganisationUnitTree/OrganisationUnitNode.js"]={name:"OrganisationUnitNode",docgenInfo:OrganisationUnitNode_OrganisationUnitNode.__docgenInfo,path:"src/OrganisationUnitTree/OrganisationUnitNode.js"});var RootError_RootError=function RootError(_ref){var dataTest=_ref.dataTest,error=_ref.error;return react_default.a.createElement("div",{"data-test":"".concat(dataTest,"-loading")},d2_i18n_default.a.t("Error: "),error)};RootError_RootError.__docgenInfo={description:"",methods:[],displayName:"RootError",props:{dataTest:{type:{name:"string"},required:!0,description:""},error:{type:{name:"string"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OrganisationUnitTree/RootError.js"]={name:"RootError",docgenInfo:RootError_RootError.__docgenInfo,path:"src/OrganisationUnitTree/RootError.js"});var RootLoading_RootLoading=function RootLoading(_ref){var dataTest=_ref.dataTest;return react_default.a.createElement("div",{"data-test":"".concat(dataTest,"-loading"),className:"jsx-814846266"},react_default.a.createElement(lib.c,{small:!0}),react_default.a.createElement(style_default.a,{id:"814846266"},["div.jsx-814846266{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))};RootLoading_RootLoading.__docgenInfo={description:"",methods:[],displayName:"RootLoading",props:{dataTest:{type:{name:"string"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OrganisationUnitTree/RootLoading.js"]={name:"RootLoading",docgenInfo:RootLoading_RootLoading.__docgenInfo,path:"src/OrganisationUnitTree/RootLoading.js"});var objectWithoutProperties=__webpack_require__(192),useExpanded_useExpanded=function useExpanded(initiallyExpanded,onExpand,onCollapse){var allInitiallyExpandedPaths=function getInitiallyExpandedPaths(initiallyExpanded){return initiallyExpanded.reduce((function(all,curPath){var allPathsInCurPath=function extractAllPathsFromPath(path){var segments=path.replace(/^\//,"").split("/");return segments.map((function(segment,index){return"/".concat(segments.slice(0,index+1).join("/"))}))}(curPath);return[].concat(Object(toConsumableArray.a)(all),Object(toConsumableArray.a)(allPathsInCurPath))}),[])}(initiallyExpanded),_useState=Object(react.useState)(allInitiallyExpandedPaths),_useState2=Object(slicedToArray.a)(_useState,2),expanded=_useState2[0],_createExpandHandlers=function createExpandHandlers(_ref){var expanded=_ref.expanded,setExpanded=_ref.setExpanded,onExpand=_ref.onExpand,onCollapse=_ref.onCollapse;return{handleExpand:function handleExpand(_ref2){var path=_ref2.path,rest=Object(objectWithoutProperties.a)(_ref2,["path"]);expanded.includes(path)||(setExpanded([].concat(Object(toConsumableArray.a)(expanded),[path])),onExpand&&onExpand(Object(objectSpread2.a)({path:path},rest)))},handleCollapse:function handleCollapse(_ref3){var path=_ref3.path,rest=Object(objectWithoutProperties.a)(_ref3,["path"]),pathIndex=expanded.indexOf(path);if(-1!==pathIndex){var updatedExpanded=0===pathIndex?expanded.slice(1):[].concat(Object(toConsumableArray.a)(expanded.slice(0,pathIndex)),Object(toConsumableArray.a)(expanded.slice(pathIndex+1)));setExpanded(updatedExpanded),onCollapse&&onCollapse(Object(objectSpread2.a)({path:path},rest))}}}}({expanded:expanded,setExpanded:_useState2[1],onExpand:onExpand,onCollapse:onCollapse});return{expanded:expanded,handleExpand:_createExpandHandlers.handleExpand,handleCollapse:_createExpandHandlers.handleCollapse}};__webpack_require__.d(__webpack_exports__,"a",(function(){return OrganisationUnitTree_OrganisationUnitTree}));var OrganisationUnitTree_OrganisationUnitTree=function OrganisationUnitTree(_ref){var onChange=_ref.onChange,roots=_ref.roots,autoExpandLoadingError=_ref.autoExpandLoadingError,dataTest=_ref.dataTest,disableSelection=_ref.disableSelection,forceReload=_ref.forceReload,highlighted=_ref.highlighted,isUserDataViewFallback=_ref.isUserDataViewFallback,initiallyExpanded=_ref.initiallyExpanded,filter=_ref.filter,selected=_ref.selected,singleSelection=_ref.singleSelection,onExpand=_ref.onExpand,onCollapse=_ref.onCollapse,onChildrenLoaded=_ref.onChildrenLoaded,rootIds=Array.isArray(roots)?roots:[roots],reloadId=function useForceReload(forceReload){var _useState=Object(react.useState)(0),_useState2=Object(slicedToArray.a)(_useState,2),reloadId=_useState2[0],setReloadId=_useState2[1];return Object(react.useEffect)((function(){!0===forceReload&&setReloadId(reloadId+1)}),[forceReload]),reloadId}(forceReload),_useOrgData=useOrgData_useOrgData(rootIds,{withChildren:!1,isUserDataViewFallback:isUserDataViewFallback}),loading=_useOrgData.loading,error=_useOrgData.error,data=_useOrgData.data,refetch=_useOrgData.refetch,_useExpanded=useExpanded_useExpanded(initiallyExpanded,onExpand,onCollapse),expanded=_useExpanded.expanded,handleExpand=_useExpanded.handleExpand,handleCollapse=_useExpanded.handleCollapse;return Object(react.useEffect)((function(){refetch&&reloadId>0&&refetch()}),[reloadId,refetch]),react_default.a.createElement("div",{"data-test":dataTest},error&&react_default.a.createElement(RootError_RootError,{error:error,dataTest:dataTest}),loading&&react_default.a.createElement(RootLoading_RootLoading,{dataTest:dataTest}),!error&&!loading&&rootIds.map((function(rootId){var rootNode=data[rootId],rootPath="/".concat(rootId);return react_default.a.createElement(OrganisationUnitNode_OrganisationUnitNode,{key:rootPath,autoExpandLoadingError:autoExpandLoadingError,dataTest:dataTest,disableSelection:disableSelection,displayName:rootNode.displayName,expanded:expanded,highlighted:highlighted,id:rootId,isUserDataViewFallback:isUserDataViewFallback,filter:filter,path:rootPath,selected:selected,singleSelection:singleSelection,onChange:onChange,onChildrenLoaded:onChildrenLoaded,onCollapse:handleCollapse,onExpand:handleExpand})})))};OrganisationUnitTree_OrganisationUnitTree.defaultProps={dataTest:"dhis2-uiwidgets-orgunittree",filter:[],highlighted:[],initiallyExpanded:[],selected:[]},OrganisationUnitTree_OrganisationUnitTree.__docgenInfo={description:"@module\n@param {OrganisationUnitTree.PropTypes} props\n@returns {React.Component}\n\n@example\nimport { OrganisationUnitTree } from '@dhis2/ui-widgets'\n\n@example\n<OrganisationUnitTree\n    name=\"Root org unit\"\n    roots=\"A0000000000\"\n    onChange={onChange}\n    onExpand={onExpand}\n    onCollapse={onCollapse}\n    onChildrenLoaded={onChildrenLoaded}\n    initiallyExpanded={['/A0000000000/A0000000001']}\n    filter={['/A0000000000/A0000000001/A0000000003']}\n/>\n\n@see Specification: {@link https://github.com/dhis2/design-system/blob/master/organisms/organisation-unit-tree/org-unit-tree.md|Design system}\n@see Live demo: {@link /demo/?path=/story/organisationunittree--collapsed|Storybook}",methods:[],displayName:"OrganisationUnitTree",props:{dataTest:{defaultValue:{value:"'dhis2-uiwidgets-orgunittree'",computed:!1},type:{name:"string"},required:!1,description:""},filter:{defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"custom",raw:"orgUnitPathPropType"}},required:!1,description:""},highlighted:{defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"custom",raw:"orgUnitPathPropType"}},required:!1,description:""},initiallyExpanded:{defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"custom",raw:"orgUnitPathPropType"}},required:!1,description:""},selected:{defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"custom",raw:"orgUnitPathPropType"}},required:!1,description:""},roots:{type:{name:"union",value:[{name:"string"},{name:"arrayOf",value:{name:"string"}}]},required:!0,description:""},onChange:{type:{name:"func"},required:!0,description:""},autoExpandLoadingError:{type:{name:"bool"},required:!1,description:""},disableSelection:{type:{name:"bool"},required:!1,description:""},forceReload:{type:{name:"bool"},required:!1,description:""},isUserDataViewFallback:{type:{name:"bool"},required:!1,description:""},singleSelection:{type:{name:"bool"},required:!1,description:""},onChildrenLoaded:{type:{name:"func"},required:!1,description:""},onCollapse:{type:{name:"func"},required:!1,description:""},onExpand:{type:{name:"func"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/OrganisationUnitTree.js"]={name:"OrganisationUnitTree",docgenInfo:OrganisationUnitTree_OrganisationUnitTree.__docgenInfo,path:"src/OrganisationUnitTree.js"})},354:function(module,exports,__webpack_require__){__webpack_require__(355),__webpack_require__(592),__webpack_require__(593),module.exports=__webpack_require__(595)},487:function(module,exports){},593:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(594)},595:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(30);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(785)],module)}.call(this,__webpack_require__(165)(module))},785:function(module,exports,__webpack_require__){var map={"./HeaderBar.stories.js":786,"./OrganisationUnitTree.stories.js":793};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=785},786:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(30),_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(18),_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(133),customData={"system/info":{systemName:"Foobar",contextPath:"https://play.dhis2.org/2.32.0"},me:{name:"John Doe",email:"john_doe@dhis2.org",settings:{keyUiLocale:"en"}},"action::menu/getModules":{modules:[{name:"dhis-web-dashboard",namespace:"/dhis-web-dashboard",defaultAction:"../dhis-web-dashboard/index.action",displayName:"Dashboard",icon:"../icons/dhis-web-dashboard.png",description:""},{name:"dhis-web-data-visualizer",namespace:"/dhis-web-data-visualizer",defaultAction:"../dhis-web-data-visualizer/index.action",displayName:"Data Visualizer",icon:"../icons/dhis-web-data-visualizer.png",description:""},{name:"dhis-web-capture",namespace:"/dhis-web-capture",defaultAction:"../dhis-web-capture/index.action",displayName:"Capture",icon:"../icons/dhis-web-capture.png",description:""},{name:"dhis-web-maintenance",namespace:"/dhis-web-maintenance",defaultAction:"../dhis-web-maintenance/index.action",displayName:"Maintenance",icon:"../icons/dhis-web-maintenance.png",description:""},{name:"dhis-web-maps",namespace:"/dhis-web-maps",defaultAction:"../dhis-web-maps/index.action",displayName:"Maps",icon:"../icons/dhis-web-maps.png",description:""},{name:"dhis-web-event-reports",namespace:"/dhis-web-event-reports",defaultAction:"../dhis-web-event-reports/index.action",displayName:"Event Reports",icon:"../icons/dhis-web-event-reports.png",description:""},{name:"dhis-web-interpretation",namespace:"/dhis-web-interpretation",defaultAction:"../dhis-web-interpretation/index.action",displayName:"Interpretations",icon:"../icons/dhis-web-interpretation.png",description:""},{name:"dhis-web-importexport",namespace:"/dhis-web-importexport",defaultAction:"../dhis-web-importexport/index.action",displayName:"Import/Export",icon:"../icons/dhis-web-importexport.png",description:""},{name:"WHO Metadata browser",namespace:"WHO Metadata browser",defaultAction:"https://play.dhis2.org/2.32.0/api/apps/WHO-Metadata-browser/index.html",displayName:"",icon:"https://play.dhis2.org/2.32.0/api/apps/WHO-Metadata-browser/icons/medicine-48.png",description:""},{name:"Dashboard Classic",namespace:"Dashboard Classic",defaultAction:"https://play.dhis2.org/2.32.0/api/apps/Dashboard-Classic/index.html",displayName:"",icon:"https://play.dhis2.org/2.32.0/api/apps/Dashboard-Classic/icon.png",description:"DHIS2 Legacy Dashboard App"}]},"me/dashboard":{unreadInterpretations:10,unreadMessageConversations:5}},customLogo=Object(_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},customData,{"staticContent/logo_banner":{images:{png:"https://via.placeholder.com/150x50"}}});Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("HeaderBar",module).add("Default",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_3__.a,{data:customData},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_index_js__WEBPACK_IMPORTED_MODULE_4__.a,{appName:"Example!"}))})).add("Custom Logo (wide dimension)",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_3__.a,{data:customLogo},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_index_js__WEBPACK_IMPORTED_MODULE_4__.a,{appName:"Example!"}))})).add("Loading...",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_3__.a,{options:{loadForever:!0}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_index_js__WEBPACK_IMPORTED_MODULE_4__.a,{appName:"Example!"}))})).add("Error!",(function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_3__.a,{data:{}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_index_js__WEBPACK_IMPORTED_MODULE_4__.a,{appName:"Example!"}))}))}.call(this,__webpack_require__(165)(module))},793:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(28),_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26),_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(27),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_storybook_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(30),_index__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(24),_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(18),onChange=function onChange(){for(var _console,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_console=console).log.apply(_console,["onChange"].concat(args))},onExpand=function onExpand(){for(var _console2,_len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return(_console2=console).log.apply(_console2,["onExpand"].concat(args))},onCollapse=function onCollapse(){for(var _console3,_len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return(_console3=console).log.apply(_console3,["onCollapse"].concat(args))},onChildrenLoaded=function onChildrenLoaded(){for(var _console4,_len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return(_console4=console).log.apply(_console4,["onChildrenLoaded"].concat(args))},customData={"organisationUnits/A0000000000":function organisationUnitsA0000000000(){return new Promise((function(resolve){setTimeout((function(){resolve({id:"A0000000000",path:"/A0000000000",displayName:"Org Unit 1",children:[{id:"A0000000001",path:"/A0000000000/A0000000001",children:[{id:"A0000000003"},{id:"A0000000004"}],displayName:"Org Unit 2"},{id:"A0000000002",path:"/A0000000000/A0000000002",children:[],displayName:"Org Unit 3"},{id:"A0000000006",path:"/A0000000000/A0000000006",children:[],displayName:"Org Unit 7"}]})}),1e3)}))},"organisationUnits/A0000000001":function organisationUnitsA0000000001(){return new Promise((function(resolve){setTimeout((function(){resolve({id:"A0000000001",path:"/A0000000000/A0000000001",displayName:"Org Unit 2",children:[{id:"A0000000003",path:"/A0000000000/A0000000001/A0000000003",children:[],displayName:"Org Unit 4"},{id:"A0000000004",path:"/A0000000000/A0000000001/A0000000004",children:[],displayName:"Org Unit 5"}]})}),1e3)}))},"organisationUnits/A0000000002":{displayName:"Org Unit 3",id:"A0000000002",path:"/A0000000000/A0000000002",children:[]},"organisationUnits/A0000000003":{displayName:"Org Unit 4",id:"A0000000003",path:"/A0000000000/A0000000001/A0000000003",children:[]},"organisationUnits/A0000000004":{displayName:"Org Unit 5",id:"A0000000004",path:"/A0000000000/A0000000001/A0000000004",children:[]},"organisationUnits/A0000000006":function organisationUnitsA0000000006(){return new Promise((function(resolve){setTimeout((function(){resolve({displayName:"Org Unit 7",id:"A0000000006",path:"/A0000000000/A0000000006",children:[]})}),400)}))}},ForceReloadAll=function ForceReloadAll(_ref){var delay=_ref.delay,_useState=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(!1),_useState2=Object(_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState,2),forceReload=_useState2[0],setForceReload=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_3__.useEffect)((function(){setTimeout((function(){return setForceReload(!0)}),delay)}),[]),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,forceReload:forceReload,name:"Root org unit",roots:["A0000000000"],initiallyExpanded:["/A0000000000/A0000000001"],selected:["/A0000000000/A0000000001/A0000000003"]})},ForceReloadIds=function ForceReloadIds(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p",null,"This is currently not working due to limitations of the data engine in the app runtime.")},ReplaceRoots=function ReplaceRoots(_ref2){var delay=_ref2.delay;return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("p",null,"This is currently not working due to limitations of the data engine in the app runtime. Normally the root unit would've been replaced after "," ".concat(delay," ")," milliseconds.")};Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.storiesOf)("OrganisationUnitTree",module).addDecorator((function(fn){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_6__.a,{data:customData},fn())})).add("Collapsed",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,name:"Root org unit",roots:["A0000000000"]})})).add("Expanded",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,name:"Root org unit",roots:["A0000000000"],initiallyExpanded:["/A0000000000/A0000000001"]})})).add("Multiple roots",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,name:"Root org unit",roots:["A0000000000","A0000000001"],initiallyExpanded:["/A0000000000/A0000000001"]})})).add("Filtered (root)",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,name:"Root org unit",roots:["A0000000000","A0000000001"],initiallyExpanded:["/A0000000000/A0000000001"],filter:["/A0000000000"]})})).add("Filtered",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,name:"Root org unit",roots:["A0000000000"],initiallyExpanded:["/A0000000000/A0000000001"],filter:["/A0000000000/A0000000001"]})})).add("Selected multiple",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,name:"Root org unit",roots:["A0000000000"],selected:["/A0000000000/A0000000002","/A0000000000/A0000000001/A0000000003"],initiallyExpanded:["/A0000000000","/A0000000000/A0000000001"]})})).add("Indeterminate",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,name:"Root org unit",roots:["A0000000000"],selected:["/A0000000000/A0000000001"],initiallyExpanded:["/A0000000000"]})})).add("Single selection",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,singleSelection:!0,name:"Root org unit",roots:["A0000000000"],selected:["/A0000000000/A0000000001"],initiallyExpanded:["/A0000000000"]})})).add("No selection",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,disableSelection:!0,name:"Root org unit",roots:["A0000000000"],selected:["/A0000000000/A0000000001"],initiallyExpanded:["/A0000000000"]})})).add("Highlighted",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,highlighted:["/A0000000000/A0000000001"],name:"Root org unit",roots:["A0000000000"],initiallyExpanded:["/A0000000000"]})})).add("Force reload all",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ForceReloadAll,{delay:2e3})})).add("Force reload one unit",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ForceReloadIds,{delay:2e3})})).add("Replace roots",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(ReplaceRoots,{delay:1e3})})),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.storiesOf)("OrganisationUnitTree",module).add("Loading",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_6__.a,{data:Object(_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},customData,{"organisationUnits/A0000000001":function organisationUnitsA0000000001(){return new Promise((function(){return null}))}})},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,name:"Root org unit",roots:["A0000000000"],initiallyExpanded:["/A0000000000/A0000000001"]}))})),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.storiesOf)("OrganisationUnitTree",module).add("Root loading",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_6__.a,{data:Object(_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},customData,{"organisationUnits/A0000000000":function organisationUnitsA0000000000(){return new Promise((function(){return null}))}})},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("fieldset",{style:{maxWidth:600}},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("legend",{style:{padding:"0 10px"}},"Custom container (max-width: 600px)"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,name:"Root org unit",roots:["A0000000000"],initiallyExpanded:["/A0000000000/A0000000001"]})))})),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.storiesOf)("OrganisationUnitTree",module).add("Root error",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_6__.a,{data:Object(_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},customData,{"organisationUnits/A0000000000":function organisationUnitsA0000000000(){return new Promise((function(_,reject){return reject("This is a custom error message, it could be anything")}))}})},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("fieldset",{style:{maxWidth:600}},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("legend",{style:{padding:"0 10px"}},"Custom container (max-width: 600px)"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{onChange:onChange,name:"Root org unit",roots:["A0000000000"],initiallyExpanded:["/A0000000000/A0000000001"]})))})),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.storiesOf)("OrganisationUnitTree",module).add("Loading error grandchild",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_6__.a,{data:Object(_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},customData,{"organisationUnits/A0000000003":function organisationUnitsA0000000003(){return Promise.reject(new Error("Loading org unit 4 and 5 failed"))}})},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,{autoExpandLoadingError:!0,name:"Root org unit",roots:["A0000000000"],onChange:onChange,onExpand:onExpand,onCollapse:onCollapse,onChildrenLoaded:onChildrenLoaded,initiallyExpanded:["/A0000000000/A0000000001"]}))}));var DX_onChange=function DX_onChange(selected,setSelected,singleSelection){return function(_ref3){var id=_ref3.id,path=_ref3.path,checked=_ref3.checked;console.log("onChange",{path:path,id:id,checked:checked});var pathIndex=selected.indexOf(path);setSelected(checked?singleSelection?[path]:[].concat(Object(_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(selected),[path]):singleSelection?[]:[].concat(Object(_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(selected.slice(0,pathIndex)),Object(_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(selected.slice(pathIndex+1))))}},Wrapper=function Wrapper(props){var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)([]),_useState4=Object(_home_runner_work_ui_widgets_ui_widgets_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_5__.a,Object.assign({name:"Root org unit",roots:["A0000000000"],selected:selected,onChange:DX_onChange(selected,setSelected,props.singleSelection),initiallyExpanded:["A0000000001/A0000000002"]},props))};Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.storiesOf)("OrganisationUnitTree",module).addDecorator((function(fn){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_6__.a,{data:customData},fn())})).add("DX: Multi selection",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(Wrapper,null)})).add("DX: Single selection",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(Wrapper,{singleSelection:!0})})).add("DX: No selection",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(Wrapper,{disableSelection:!0})})),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.storiesOf)("OrganisationUnitTree",module).addDecorator((function(fn){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_dhis2_app_runtime__WEBPACK_IMPORTED_MODULE_6__.b,{baseUrl:"https://debug.dhis2.org/dev",apiVersion:""},fn())})).add("DX: With real backend",(function(){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",{style:{marginBottom:20,lineHeight:"28px"}},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("b",null,"This story doesn't work on netlify for some reason, just run it locally."),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br",null),"You need to log in to"," ",react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("a",{href:"https://debug.dhis2.org/dev",target:"_blank",rel:"noopener noreferrer"},"https://debug.dhis2.org/dev"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("br",null),"Make sure the"," ",react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("code",{style:{background:"#ccc"}},"localhost:[PORT]")," is part of the accepted list:"," ",react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("a",{href:"https://debug.dhis2.org/dev/dhis-web-settings/#/access",target:"_blank",rel:"noopener noreferrer"},"Settings app / Access")),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(Wrapper,{roots:"ImspTQPwCqd"}))}))}.call(this,__webpack_require__(165)(module))}},[[354,1,2]]]);
//# sourceMappingURL=main.1e11b83ef734cf811c21.bundle.js.map