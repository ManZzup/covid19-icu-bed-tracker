{"version":3,"file":"lib.js","sources":["../../src/icons/Settings.js","../../src/icons/Apps.js","../../src/icons/Cancel.js","../../src/HeaderBar/Apps.js","../../src/icons/Info.js","../../src/icons/Help.js","../../src/icons/Exit.js","../../src/icons/Account.js","../../src/HeaderBar/TextIcon.js","../../src/HeaderBar/ImageIcon.js","../../src/HeaderBar/Profile/ProfileHeader.js","../../src/HeaderBar/Profile/ProfileMenu.js","../../src/HeaderBar/Profile.js","../../src/HeaderBar/LogoImage.js","../../src/HeaderBar/Logo.js","../../src/HeaderBar/Title.js","../../src/icons/Email.js","../../src/icons/Message.js","../../src/HeaderBar/NotificationIcon.js","../../src/HeaderBar/Notifications.js","../../src/HeaderBar.js","../../src/OrganisationUnitTree/ErrorMessage.js","../../src/OrganisationUnitTree/icons/FolderOpen.js","../../src/OrganisationUnitTree/icons/FolderClosed.js","../../src/OrganisationUnitTree/icons/Single.js","../../src/OrganisationUnitTree/icons/Empty.js","../../src/OrganisationUnitTree/propTypes.js","../../src/OrganisationUnitTree/Label.js","../../src/OrganisationUnitTree/computeChildNodes.js","../../src/OrganisationUnitTree/hasDescendantSelectedPaths.js","../../src/OrganisationUnitTree/useOpenState.js","../../src/OrganisationUnitTree/fromEntries.js","../../src/OrganisationUnitTree/useOrgData/helpers.js","../../src/OrganisationUnitTree/useOrgData.js","../../src/OrganisationUnitTree/OrganisationUnitNode.js","../../src/OrganisationUnitTree/RootError.js","../../src/OrganisationUnitTree/RootLoading.js","../../src/OrganisationUnitTree/useExpanded/helpers.js","../../src/OrganisationUnitTree/useExpanded.js","../../src/OrganisationUnitTree/useForceReload.js","../../src/OrganisationUnitTree.js"],"sourcesContent":["import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport function Settings({ className }) {\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            className={className}\n        >\n            <path d=\"M0 0h48v48H0z\" fill=\"none\" />\n            <path d=\"M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3c-1.22.51-2.35 1.17-3.38 1.97L9.9 10.1c-.45-.17-.97 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3c1.22-.51 2.35-1.17 3.38-1.97l4.98 2.01c.45.17.97 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\" />\n        </svg>\n    )\n}\nSettings.propTypes = {\n    className: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport function Apps({ className }) {\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            className={className}\n        >\n            <path d=\"M8 16h8V8H8v8zm12 24h8v-8h-8v8zM8 40h8v-8H8v8zm0-12h8v-8H8v8zm12 0h8v-8h-8v8zM32 8v8h8V8h-8zm-12 8h8V8h-8v8zm12 12h8v-8h-8v8zm0 12h8v-8h-8v8z\" />\n            <path d=\"M0 0h48v48H0z\" fill=\"none\" />\n        </svg>\n    )\n}\nApps.propTypes = {\n    className: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport function Cancel({ className }) {\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            className={className}\n        >\n            <path d=\"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z\" />\n            <path d=\"M0 0h48v48H0z\" fill=\"none\" />\n        </svg>\n    )\n}\nCancel.propTypes = {\n    className: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nimport i18n from '@dhis2/d2-i18n'\nimport { Card, InputField, colors, theme } from '@dhis2/ui-core'\n\nimport { Settings } from '../icons/Settings.js'\nimport { Apps as AppsIcon } from '../icons/Apps.js'\nimport { Cancel } from '../icons/Cancel.js'\n\nimport css from 'styled-jsx/css'\n\nconst appIcon = css.resolve`\n    svg {\n        fill: ${colors.white};\n        cursor: pointer;\n        height: 24px;\n        width: 24px;\n    }\n`\n\nconst trailIcon = css.resolve`\n    svg {\n        fill: ${colors.grey900};\n        cursor: pointer;\n        height: 24px;\n        width: 24px;\n        margin-right: 8px;\n        margin-top: 4px;\n    }\n`\n\nconst settingsIcon = css.resolve`\n    svg {\n        margin: 8px 8px 0 16px;\n        color: ${colors.grey900};\n        height: 24px;\n        width: 24px;\n        cursor: pointer;\n    }\n`\n\nfunction TrailIcon({ onClick }) {\n    return (\n        <a onClick={onClick}>\n            <Cancel className={trailIcon.className} />\n        </a>\n    )\n}\nTrailIcon.propTypes = {\n    onClick: propTypes.func,\n}\n\nfunction Search({ value, onChange, onIconClick, contextPath }) {\n    return (\n        <div>\n            <span>\n                <InputField\n                    value={value}\n                    name=\"filter\"\n                    placeholder={i18n.t('Search apps')}\n                    onChange={onChange}\n                    trailIcon={<TrailIcon onClick={onIconClick} />}\n                    initialFocus\n                />\n            </span>\n\n            <span>\n                <a href={`${contextPath}/dhis-web-menu-management`}>\n                    <Settings className={settingsIcon.className} />\n                </a>\n            </span>\n\n            {trailIcon.styles}\n            {settingsIcon.styles}\n            <style jsx>{`\n                div {\n                    display: flex;\n                    flex-direction: row;\n                    flex-wrap: nowrap;\n                    height: 52px;\n                    margin: 8px;\n                }\n\n                span {\n                    flex: 1 100%;\n                }\n\n                span:last-child {\n                    flex: 1 auto;\n                }\n            `}</style>\n        </div>\n    )\n}\n\nSearch.defaultProps = {\n    onIconClick: null,\n}\n\nSearch.propTypes = {\n    contextPath: propTypes.string.isRequired,\n    value: propTypes.string.isRequired,\n    onChange: propTypes.func.isRequired,\n    onIconClick: propTypes.func,\n}\n\nfunction Item({ name, path, img }) {\n    return (\n        <a href={path}>\n            <img src={img} alt=\"app logo\" />\n\n            <div>{name}</div>\n\n            <style jsx>{`\n                a {\n                    display: inline-block;\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    justify-content: center;\n                    width: 96px;\n                    margin: 8px;\n                    padding: 8px;\n                    border-radius: 12px;\n                    text-decoration: none;\n                    cursor: pointer;\n                }\n\n                a:hover,\n                a:focus {\n                    background-color: ${theme.primary050};\n                    cursor: pointer;\n                }\n\n                a:hover > div {\n                    font-weight: 500;\n                    cursor: pointer;\n                }\n\n                img {\n                    width: 48px;\n                    height: 48px;\n                    cursor: pointer;\n                }\n\n                div {\n                    margin-top: 14px;\n                    color: rgba(0, 0, 0, 0.87);\n                    font-size: 12px;\n                    letter-spacing: 0.01em;\n                    line-height: 14px;\n                    text-align: center;\n                    cursor: pointer;\n                }\n            `}</style>\n        </a>\n    )\n}\n\nItem.propTypes = {\n    img: propTypes.string,\n    name: propTypes.string,\n    path: propTypes.string,\n}\n\nfunction List({ apps, filter }) {\n    return (\n        <div data-test=\"headerbar-apps-menu-list\">\n            {apps\n                .filter(({ displayName, name }) => {\n                    const appName = displayName || name\n                    return filter.length > 0\n                        ? appName.toLowerCase().match(filter.toLowerCase())\n                        : true\n                })\n                .map(({ displayName, name, defaultAction, icon }, idx) => (\n                    <Item\n                        key={`app-${name}-${idx}`}\n                        name={displayName || name}\n                        path={defaultAction}\n                        img={icon}\n                    />\n                ))}\n\n            <style jsx>{`\n                div {\n                    display: flex;\n                    flex-direction: row;\n                    flex-wrap: wrap;\n                    align-content: flex-start;\n                    align-items: flex-start;\n                    justify-content: flex-start;\n                    width: 30vw;\n                    min-width: 300px;\n                    max-width: 560px;\n\n                    min-height: 200px;\n                    max-height: 465px;\n                    margin: 0 8px 8px 8px;\n\n                    overflow: auto;\n                    overflow-x: hidden;\n                }\n            `}</style>\n        </div>\n    )\n}\nList.propTypes = {\n    apps: propTypes.array,\n    filter: propTypes.string,\n}\n\nexport default class Apps extends React.Component {\n    state = {\n        show: false,\n        filter: '',\n    }\n\n    componentDidMount() {\n        document.addEventListener('click', this.onDocClick)\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.onDocClick)\n    }\n\n    onDocClick = evt => {\n        if (this.elContainer && !this.elContainer.contains(evt.target)) {\n            this.setState({ show: false })\n        }\n    }\n\n    onToggle = () => this.setState({ show: !this.state.show })\n\n    onChange = ({ value }) => this.setState({ filter: value })\n\n    onIconClick = () => this.setState({ filter: '' })\n\n    AppMenu = apps => (\n        <div data-test=\"headerbar-apps-menu\">\n            <Card>\n                <Search\n                    value={this.state.filter}\n                    onChange={this.onChange}\n                    onIconClick={this.onIconClick}\n                    contextPath={this.props.contextPath}\n                />\n                <List apps={apps} filter={this.state.filter} />\n            </Card>\n\n            <style jsx>{`\n                div {\n                    z-index: 10000;\n                    position: absolute;\n                    top: 28px;\n                    right: -6px;\n                    border-top: 4px solid transparent;\n                }\n            `}</style>\n        </div>\n    )\n\n    render() {\n        const apps = this.props.apps\n        return (\n            <div ref={c => (this.elContainer = c)} data-test=\"headerbar-apps\">\n                <a onClick={this.onToggle} data-test=\"headerbar-apps-icon\">\n                    <AppsIcon className={appIcon.className} />\n                </a>\n\n                {this.state.show && this.AppMenu(apps)}\n\n                {appIcon.styles}\n                <style jsx>{`\n                    a {\n                        display: block;\n                    }\n\n                    div {\n                        position: relative;\n                        width: 24px;\n                        height: 30px;\n                        margin: 8px 0 0 0;\n                    }\n                `}</style>\n            </div>\n        )\n    }\n}\n\nApps.propTypes = {\n    apps: propTypes.array.isRequired,\n    contextPath: propTypes.string.isRequired,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport function Info({ className }) {\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            className={className}\n        >\n            <path d=\"M0 0h48v48H0z\" fill=\"none\" />\n            <path d=\"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm2 30h-4V22h4v12zm0-16h-4v-4h4v4z\" />\n        </svg>\n    )\n}\nInfo.propTypes = {\n    className: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport function Help({ className }) {\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            className={className}\n        >\n            <path d=\"M0 0h48v48H0z\" fill=\"none\" />\n            <path d=\"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm2 34h-4v-4h4v4zm4.13-15.49l-1.79 1.84C26.9 25.79 26 27 26 30h-4v-1c0-2.21.9-4.21 2.34-5.66l2.49-2.52C27.55 20.1 28 19.1 28 18c0-2.21-1.79-4-4-4s-4 1.79-4 4h-4c0-4.42 3.58-8 8-8s8 3.58 8 8c0 1.76-.71 3.35-1.87 4.51z\" />\n        </svg>\n    )\n}\nHelp.propTypes = {\n    className: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport function Exit({ className }) {\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            className={className}\n        >\n            <path d=\"M0 0h48v48H0z\" fill=\"none\" />\n            <path d=\"M20.17 31.17L23 34l10-10-10-10-2.83 2.83L25.34 22H6v4h19.34l-5.17 5.17zM38 6H10c-2.21 0-4 1.79-4 4v8h4v-8h28v28H10v-8H6v8c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4z\" />\n        </svg>\n    )\n}\nExit.propTypes = {\n    className: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport function Account({ className }) {\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            className={className}\n        >\n            <path d=\"M6 10v28c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4H10c-2.21 0-4 1.79-4 4zm24 8c0 3.32-2.69 6-6 6s-6-2.68-6-6c0-3.31 2.69-6 6-6s6 2.69 6 6zM12 34c0-4 8-6.2 12-6.2S36 30 36 34v2H12v-2z\" />\n            <path d=\"M0 0h48v48H0z\" fill=\"none\" />\n        </svg>\n    )\n}\nAccount.propTypes = {\n    className: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport const TextIcon = ({ name, onClick, dataTestId }) => {\n    let title = name[0]\n\n    if (name.indexOf(' ') > 0) {\n        title += name.split(' ')[1][0]\n    }\n\n    return (\n        <div onClick={onClick} data-test={dataTestId}>\n            <p>{title}</p>\n\n            <style jsx>{`\n                div {\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    width: 36px;\n                    height: 36px;\n                    overflow: hidden;\n                    border-radius: 50%;\n                    background-color: rgba(0, 0, 0, 0.3);\n                    color: #fff;\n                    cursor: pointer;\n                }\n\n                p {\n                    font-size: 14px;\n                    font-weight: 500;\n                    letter-spacing: 1px;\n                    text-align: center;\n                    text-transform: uppercase;\n                }\n            `}</style>\n        </div>\n    )\n}\n\nTextIcon.defaultProps = {\n    onClick: undefined,\n}\n\nTextIcon.propTypes = {\n    name: propTypes.string.isRequired,\n    dataTestId: propTypes.string,\n    onClick: propTypes.func,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport const ImageIcon = ({ src, onClick, dataTestId }) => (\n    <div onClick={onClick} data-test={dataTestId}>\n        <img src={src} alt=\"user avatar\" />\n\n        <style jsx>{`\n            img {\n                max-width: 100%;\n                max-height: 100%;\n            }\n\n            div {\n                width: 48px;\n                height: 48px;\n            }\n        `}</style>\n    </div>\n)\n\nImageIcon.defaultProps = {\n    onClick: undefined,\n}\n\nImageIcon.propTypes = {\n    src: propTypes.string.isRequired,\n    dataTestId: propTypes.string,\n    onClick: propTypes.func,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nimport i18n from '@dhis2/d2-i18n'\n\nimport { TextIcon } from '../TextIcon.js'\nimport { ImageIcon } from '../ImageIcon.js'\n\nconst ProfileName = ({ children }) => (\n    <div data-test=\"headerbar-profile-username\">\n        {children}\n\n        <style jsx>{`\n            div {\n                margin-bottom: 3px;\n                font-size: 16px;\n                line-height: 19px;\n            }\n        `}</style>\n    </div>\n)\nProfileName.propTypes = {\n    children: propTypes.string,\n}\n\nconst ProfileEmail = ({ children }) => (\n    <div data-test=\"headerbar-profile-user-email\">\n        {children}\n\n        <style jsx>{`\n            div {\n                margin-bottom: 6px;\n                font-size: 14px;\n                line-height: 16px;\n            }\n        `}</style>\n    </div>\n)\nProfileEmail.propTypes = {\n    children: propTypes.string,\n}\n\nconst ProfileEdit = ({ children, contextPath }) => (\n    <a\n        href={`${contextPath}/dhis-web-user-profile/#/profile`}\n        data-test=\"headerbar-profile-edit-profile-link\"\n    >\n        {children}\n\n        <style jsx>{`\n            a {\n                color: rgba(0, 0, 0, 0.87);\n                font-size: 12px;\n                line-height: 14px;\n                text-decoration: underline;\n                cursor: pointer;\n            }\n        `}</style>\n    </a>\n)\nProfileEdit.propTypes = {\n    children: propTypes.string,\n    contextPath: propTypes.string,\n}\n\nconst ProfileDetails = ({ name, email, contextPath }) => (\n    <div>\n        <ProfileName>{name}</ProfileName>\n        <ProfileEmail>{email}</ProfileEmail>\n        <ProfileEdit contextPath={contextPath}>\n            {i18n.t('Edit profile')}\n        </ProfileEdit>\n\n        <style jsx>{`\n            div {\n                display: flex;\n                flex-direction: column;\n                margin-left: 20px;\n                color: #000;\n                font-size: 14px;\n                font-weight: 400;\n            }\n        `}</style>\n    </div>\n)\nProfileDetails.propTypes = {\n    contextPath: propTypes.string,\n    email: propTypes.string,\n    name: propTypes.string,\n}\n\nexport const ProfileHeader = ({ name, email, img, contextPath }) => (\n    <div>\n        {img ? <ImageIcon src={img} /> : <TextIcon name={name} />}\n\n        <ProfileDetails name={name} email={email} contextPath={contextPath} />\n\n        <style jsx>{`\n            div {\n                display: flex;\n                flex-direction: row;\n                margin-left: 24px;\n                padding-top: 20px;\n            }\n        `}</style>\n    </div>\n)\n\nProfileHeader.propTypes = {\n    contextPath: propTypes.string.isRequired,\n    email: propTypes.string,\n    img: propTypes.string,\n    name: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\nimport css from 'styled-jsx/css'\n\nimport i18n from '@dhis2/d2-i18n'\nimport { Card, Divider, MenuItem, colors } from '@dhis2/ui-core'\n\nimport { Settings } from '../../icons/Settings.js'\nimport { Info } from '../../icons/Info.js'\nimport { Help } from '../../icons/Help.js'\nimport { Exit } from '../../icons/Exit.js'\nimport { Account } from '../../icons/Account.js'\n\nimport { ProfileHeader } from './ProfileHeader.js'\n\nconst iconStyle = css.resolve`\n    svg {\n        fill: ${colors.grey700};\n        cursor: pointer;\n        height: 24px;\n        width: 24px;\n    }\n`\n\nconst list = [\n    {\n        icon: <Settings className={iconStyle.className} />,\n        label: i18n.t('Settings'),\n        value: 'settings',\n        link: `/dhis-web-user-profile/#/settings`,\n    },\n    {\n        icon: <Account className={iconStyle.className} />,\n        label: i18n.t('Account'),\n        value: 'account',\n        link: `/dhis-web-user-profile/#/account`,\n    },\n    {\n        icon: <Help className={iconStyle.className} />,\n        label: i18n.t('Help'),\n        value: 'help',\n        link:\n            'https://docs.dhis2.org/master/en/user/html/dhis2_user_manual_en.html',\n        nobase: true,\n    },\n    {\n        icon: <Info className={iconStyle.className} />,\n        label: i18n.t('About DHIS2'),\n        value: 'about',\n        link: `/dhis-web-user-profile/#/aboutPage`,\n    },\n    {\n        icon: <Exit className={iconStyle.className} />,\n        label: i18n.t('Logout'),\n        value: 'logout',\n        link: `/dhis-web-commons-security/logout.action`,\n    },\n]\n\nconst ProfileContents = ({ name, email, avatar, contextPath }) => (\n    <Card>\n        <div>\n            <ProfileHeader\n                name={name}\n                email={email}\n                img={avatar}\n                contextPath={contextPath}\n            />\n            <Divider margin=\"13px 0 7px 0\" />\n            <ul data-test=\"headerbar-profile-menu\">\n                {list.map(({ label, value, icon, link, nobase }) => (\n                    <MenuItem\n                        href={nobase ? link : `${contextPath}${link}`}\n                        key={`h-mi-${value}`}\n                        label={label}\n                        value={value}\n                        icon={icon}\n                    />\n                ))}\n            </ul>\n        </div>\n\n        {iconStyle.styles}\n        <style jsx>{`\n            div {\n                width: 100%;\n                padding: 0;\n            }\n\n            ul {\n                padding: 0;\n                margin: 0;\n            }\n\n            a,\n            a:hover,\n            a:focus,\n            a:active,\n            a:visited {\n                text-decoration: none;\n                display: block;\n            }\n        `}</style>\n    </Card>\n)\nProfileContents.propTypes = {\n    avatar: propTypes.element,\n    contextPath: propTypes.string,\n    email: propTypes.string,\n    name: propTypes.string,\n}\n\nexport const ProfileMenu = ({ avatar, name, email, contextPath }) => (\n    <div data-test=\"headerbar-profile-menu\">\n        <ProfileContents\n            name={name}\n            email={email}\n            avatar={avatar}\n            contextPath={contextPath}\n        />\n        <style jsx>{`\n            div {\n                z-index: 10000;\n                position: absolute;\n                top: 34px;\n                right: -6px;\n                width: 310px;\n                border-top: 4px solid transparent;\n            }\n        `}</style>\n    </div>\n)\nProfileMenu.propTypes = {\n    avatar: propTypes.element,\n    contextPath: propTypes.string,\n    email: propTypes.string,\n    name: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nimport { ProfileMenu } from './Profile/ProfileMenu.js'\n\nimport { TextIcon } from './TextIcon.js'\nimport { ImageIcon } from './ImageIcon.js'\n\nfunction avatarPath(avatar, contextPath) {\n    if (!avatar) {\n        return null\n    }\n\n    return `${contextPath}/api/fileResources/${avatar.id}/data`\n}\n\nexport default class Profile extends React.Component {\n    state = {\n        show: false,\n    }\n\n    componentDidMount() {\n        document.addEventListener('click', this.onDocClick)\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.onDocClick)\n    }\n\n    onDocClick = evt => {\n        if (this.elContainer && !this.elContainer.contains(evt.target)) {\n            this.setState({ show: false })\n        }\n    }\n\n    onToggle = () => this.setState({ show: !this.state.show })\n\n    userIcon(me, contextPath) {\n        const avatar = avatarPath(me.avatar, contextPath)\n\n        if (avatar) {\n            return (\n                <ImageIcon\n                    src={avatar}\n                    onClick={this.onToggle}\n                    dataTestId=\"headerbar-profile-icon-image\"\n                />\n            )\n        }\n\n        return (\n            <TextIcon\n                name={me.name}\n                onClick={this.onToggle}\n                dataTestId=\"headerbar-profile-icon-text\"\n            />\n        )\n    }\n\n    render() {\n        const { user, contextPath } = this.props\n\n        return (\n            <div\n                ref={c => (this.elContainer = c)}\n                data-test=\"headerbar-profile\"\n            >\n                {this.userIcon(user, contextPath)}\n\n                {this.state.show ? (\n                    <ProfileMenu\n                        avatar={avatarPath(user.avatar, contextPath)}\n                        name={user.name}\n                        email={user.email}\n                        contextPath={contextPath}\n                    />\n                ) : null}\n\n                <style jsx>{`\n                    div {\n                        position: relative;\n                        width: 36px;\n                        height: 36px;\n                        margin: 2px 12px 0 24px;\n                    }\n                `}</style>\n            </div>\n        )\n    }\n}\n\nProfile.propTypes = {\n    contextPath: propTypes.string.isRequired,\n    user: propTypes.object.isRequired,\n}\n","import React from 'react'\nimport css from 'styled-jsx/css'\n\nimport { useDataQuery } from '@dhis2/app-runtime'\nimport { LogoIconWhite } from '@dhis2/ui-core'\n\nconst logoStyles = css.resolve`\n    svg {\n        height: 25px;\n        width: 27px;\n    }\n\n    img {\n        max-height: 100%;\n        min-height: auto;\n        width: auto;\n    }\n`\n\nconst query = {\n    customLogo: {\n        resource: 'staticContent/logo_banner',\n    },\n}\n\nconst pathExists = data =>\n    data &&\n    data.customLogo &&\n    data.customLogo.images &&\n    data.customLogo.images.png\n\nexport const LogoImage = () => {\n    const { loading, error, data } = useDataQuery(query)\n\n    if (loading) return null\n\n    let Logo\n    if (!error && pathExists(data)) {\n        Logo = (\n            <img\n                alt=\"Headerbar Logo\"\n                src={data.customLogo.images.png}\n                className={logoStyles.className}\n            />\n        )\n    } else {\n        Logo = <LogoIconWhite className={logoStyles.className} />\n    }\n\n    return (\n        <div>\n            {Logo}\n\n            {logoStyles.styles}\n            <style jsx>{`\n                div {\n                    padding: 4px;\n                    min-width: 48px;\n                    max-width: 250px;\n                    height: 48px;\n\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    overflow: hidden;\n                }\n            `}</style>\n        </div>\n    )\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nimport { LogoImage } from './LogoImage.js'\n\nexport const Logo = ({ baseUrl }) => (\n    <div data-test=\"headerbar-logo\">\n        <a href={baseUrl}>\n            <LogoImage />\n        </a>\n\n        <style jsx>{`\n            div {\n                box-sizing: border-box;\n                min-width: 49px;\n                max-height: 48px;\n                margin: 0 12px 0 0;\n                border-right: 1px solid rgba(32, 32, 32, 0.15);\n            }\n\n            a,\n            a:hover,\n            a:focus,\n            a:active,\n            a:visited {\n                user-select: none;\n            }\n        `}</style>\n    </div>\n)\n\nLogo.propTypes = {\n    baseUrl: propTypes.string.isRequired,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport const Title = ({ app, instance }) => (\n    <div data-test=\"headerbar-title\">\n        {app ? `${instance} - ${app}` : `${instance}`}\n\n        <style jsx>{`\n            div {\n                overflow: hidden;\n                text-overflow: ellipsis;\n                font-size: 14px;\n                font-weight: 500;\n                letter-spacing: 0.01em;\n                white-space: nowrap;\n            }\n        `}</style>\n    </div>\n)\nTitle.propTypes = {\n    app: propTypes.string,\n    instance: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport function Email({ className }) {\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            className={className}\n        >\n            <path d=\"M40 8H8c-2.21 0-3.98 1.79-3.98 4L4 36c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 8L24 26 8 16v-4l16 10 16-10v4z\" />\n            <path d=\"M0 0h48v48H0z\" fill=\"none\" />\n        </svg>\n    )\n}\nEmail.propTypes = {\n    className: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nexport function Message({ className }) {\n    return (\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"48\"\n            height=\"48\"\n            viewBox=\"0 0 48 48\"\n            className={className}\n        >\n            <path d=\"M40 4H8C5.79 4 4.02 5.79 4.02 8L4 44l8-8h28c2.21 0 4-1.79 4-4V8c0-2.21-1.79-4-4-4zm-4 24H12v-4h24v4zm0-6H12v-4h24v4zm0-6H12v-4h24v4z\" />\n            <path d=\"M0 0h48v48H0z\" fill=\"none\" />\n        </svg>\n    )\n}\nMessage.propTypes = {\n    className: propTypes.string,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\nimport css from 'styled-jsx/css'\n\nimport { colors, theme } from '@dhis2/ui-core'\n\nimport { Email } from '../icons/Email.js'\nimport { Message } from '../icons/Message.js'\n\nconst messageIcon = css.resolve`\n    svg {\n        fill: ${colors.white};\n        cursor: pointer;\n        height: 24px;\n        width: 24px;\n    }\n`\n\nconst interpretationIcon = css.resolve`\n    svg {\n        fill: ${colors.white};\n        cursor: pointer;\n        height: 24px;\n        width: 24px;\n    }\n`\n\nfunction icon(kind) {\n    if (kind === 'message') {\n        return (\n            <Message className={messageIcon.className}>\n                {messageIcon.styles}\n            </Message>\n        )\n    } else {\n        return (\n            <Email className={interpretationIcon.className}>\n                {interpretationIcon.styles}\n            </Email>\n        )\n    }\n}\n\nexport const NotificationIcon = ({ count, href, kind, dataTestId }) => (\n    <a href={href} className={kind} data-test={dataTestId}>\n        {icon(kind)}\n\n        {count > 0 && <span data-test={`${dataTestId}-count`}>{count}</span>}\n\n        <style jsx>{`\n            a {\n                position: relative;\n                margin: 8px 24px 0 0;\n                cursor: pointer;\n            }\n\n            span {\n                z-index: 1;\n                position: absolute;\n                top: -6px;\n                right: -10px;\n                width: 16px;\n                height: 16px;\n                border-radius: 50%;\n                background-color: ${theme.secondary300};\n                color: #fff;\n                font-size: 9px;\n                font-weight: 500;\n                line-height: 16px;\n                text-align: center;\n                cursor: inherit;\n            }\n        `}</style>\n    </a>\n)\n\nNotificationIcon.defaultProps = {\n    count: 0,\n}\n\nNotificationIcon.propTypes = {\n    href: propTypes.string.isRequired,\n    count: propTypes.number,\n    dataTestId: propTypes.string,\n    kind: propTypes.oneOf(['interpretation', 'message']),\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nimport { NotificationIcon } from './NotificationIcon.js'\n\nexport const Notifications = ({ interpretations, messages, contextPath }) => (\n    <div data-test=\"headerbar-notifications\">\n        <NotificationIcon\n            count={interpretations}\n            href={`${contextPath}/dhis-web-interpretation`}\n            kind=\"message\"\n            dataTestId=\"headerbar-interpretations\"\n        />\n\n        <NotificationIcon\n            message=\"email\"\n            count={messages}\n            href={`${contextPath}/dhis-web-messaging`}\n            kind=\"interpretation\"\n            dataTestId=\"headerbar-messages\"\n        />\n\n        <style jsx>{`\n            div {\n                user-select: none;\n                display: flex;\n                flex-direction: row;\n                align-items: center;\n            }\n        `}</style>\n    </div>\n)\nNotifications.propTypes = {\n    contextPath: propTypes.string,\n    interpretations: propTypes.number,\n    messages: propTypes.number,\n}\n","import React, { useEffect } from 'react'\nimport propTypes from '@dhis2/prop-types'\n\nimport { colors } from '@dhis2/ui-core'\n\nimport Apps from './HeaderBar/Apps.js'\nimport Profile from './HeaderBar/Profile.js'\n\nimport { useDataQuery } from '@dhis2/app-runtime'\n\nimport { Logo } from './HeaderBar/Logo.js'\nimport { Title } from './HeaderBar/Title.js'\n\nimport { Notifications } from './HeaderBar/Notifications.js'\n\nimport './locales'\nimport i18n from '@dhis2/d2-i18n'\n\nconst query = {\n    systemInfo: {\n        resource: 'system/info',\n    },\n    user: {\n        resource: 'me',\n    },\n    apps: {\n        resource: 'action::menu/getModules',\n    },\n    notifications: {\n        resource: 'me/dashboard',\n    },\n}\n\nexport const HeaderBar = ({ appName, className }) => {\n    const { loading, error, data } = useDataQuery(query)\n\n    useEffect(() => {\n        const getPath = path =>\n            path.startsWith('http:') || path.startsWith('https:')\n                ? path\n                : `${data.systemInfo.contextPath}/api/${path}`\n\n        if (!loading && !error)\n            data.apps.modules.forEach(app => {\n                app.icon = getPath(app.icon)\n                app.defaultAction = getPath(app.defaultAction)\n            })\n    }, [data])\n\n    if (!loading && !error) {\n        // TODO: This will run every render which is probably wrong!  Also, setting the global locale shouldn't be done in the headerbar\n        const locale = data.user.settings.keyUiLocale || 'en'\n        i18n.changeLanguage(locale)\n    }\n\n    return (\n        <header className={className}>\n            {!loading && !error && (\n                <>\n                    <Logo baseUrl={data.systemInfo.contextPath} />\n                    <Title\n                        app={appName}\n                        instance={data.systemInfo.systemName}\n                    />\n                    <div className=\"right-control-spacer\" />\n                    <Notifications\n                        interpretations={\n                            data.notifications.unreadInterpretations\n                        }\n                        messages={data.notifications.unreadMessageConversations}\n                        contextPath={data.systemInfo.contextPath}\n                    />\n                    <Apps\n                        apps={data.apps.modules}\n                        contextPath={data.systemInfo.contextPath}\n                    />\n                    <Profile\n                        user={data.user}\n                        contextPath={data.systemInfo.contextPath}\n                    />\n                </>\n            )}\n\n            <style jsx>{`\n                header {\n                    background-color: #2c6693;\n                    display: flex;\n                    flex-direction: row;\n                    align-items: center;\n                    justify-content: space-between;\n                    height: 48px;\n                    border-bottom: 1px solid rgba(32, 32, 32, 0.15);\n                    color: ${colors.white};\n                }\n                .right-control-spacer {\n                    margin-left: auto;\n                }\n            `}</style>\n        </header>\n    )\n}\n\nHeaderBar.propTypes = {\n    appName: propTypes.string,\n    className: propTypes.string,\n}\n","import { colors, spacers, theme } from '@dhis2/ui-core'\nimport React from 'react'\nimport propTypes from 'prop-types'\n\nexport const ErrorMessage = ({ children, dataTest }) => (\n    <span data-test={`${dataTest}-error`}>\n        {children}\n\n        <style jsx>{`\n            span {\n                font-size: 14px;\n                color: ${colors.grey800};\n                margin: ${spacers.dp4};\n                color: ${theme.error};\n            }\n        `}</style>\n    </span>\n)\n\nErrorMessage.propTypes = {\n    children: propTypes.any.isRequired,\n    dataTest: propTypes.string.isRequired,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\n/**\n * @module\n * @returns {React.Component}\n */\nexport const FolderOpen = ({ dataTest }) => (\n    <svg\n        width=\"18px\"\n        height=\"18px\"\n        viewBox=\"0 0 18 18\"\n        version=\"1.1\"\n        data-test={`${dataTest}-iconfolderopen`}\n    >\n        <g\n            id=\"icon/folder/open\"\n            stroke=\"none\"\n            strokeWidth=\"1\"\n            fill=\"none\"\n            fillRule=\"evenodd\"\n        >\n            <g\n                id=\"Group\"\n                transform=\"translate(0.000000, 3.000000)\"\n                stroke=\"#6E7A8A\"\n            >\n                <path\n                    d=\"M2,0.5 C1.17157288,0.5 0.5,1.17157288 0.5,2 L0.5,10 C0.5,10.8284271 1.17157288,11.5 2,11.5 L12,11.5 C12.8284271,11.5 13.5,10.8284271 13.5,10 L13.5,4 C13.5,3.17157288 12.8284271,2.5 12,2.5 L6.69098301,2.5 L5.82917961,0.776393202 C5.7444836,0.607001188 5.57135204,0.5 5.38196601,0.5 L2,0.5 Z\"\n                    id=\"Path-2\"\n                    fill=\"#A0ADBA\"\n                />\n\n                <path\n                    d=\"M1.53632259,10.7093809 C1.47575089,10.7941813 1.44318932,10.8957885 1.44318932,11 C1.44318932,11.2761424 1.66704695,11.5 1.94318932,11.5 L12.4853821,11.5 C12.6468577,11.5 12.7983931,11.4220172 12.8922488,11.2906191 L16.4636774,6.2906191 C16.5242491,6.20581872 16.5568107,6.10421149 16.5568107,6 C16.5568107,5.72385763 16.3329531,5.5 16.0568107,5.5 L5.5146179,5.5 C5.35314234,5.5 5.20160692,5.57798284 5.10775116,5.7093809 L1.53632259,10.7093809 Z\"\n                    id=\"Path-3\"\n                    fill=\"#FBFCFD\"\n                />\n            </g>\n        </g>\n\n        <style jsx>{`\n            svg {\n                margin: 3px 0;\n                display: block;\n            }\n        `}</style>\n    </svg>\n)\n\nFolderOpen.propTypes = {\n    dataTest: propTypes.string.isRequired,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\n/**\n * @module\n * @returns {React.Component}\n */\nexport const FolderClosed = ({ dataTest }) => (\n    <svg\n        width=\"18px\"\n        height=\"18px\"\n        viewBox=\"0 0 18 18\"\n        version=\"1.1\"\n        data-test={`${dataTest}-iconfolderclosed`}\n    >\n        <g\n            id=\"icon/folder/closed\"\n            stroke=\"none\"\n            strokeWidth=\"1\"\n            fill=\"none\"\n            fillRule=\"evenodd\"\n        >\n            <path\n                d=\"M2,3.5 C1.17157288,3.5 0.5,4.17157288 0.5,5 L0.5,13 C0.5,13.8284271 1.17157288,14.5 2,14.5 L12,14.5 C12.8284271,14.5 13.5,13.8284271 13.5,13 L13.5,7 C13.5,6.17157288 12.8284271,5.5 12,5.5 L6.69098301,5.5 L5.82917961,3.7763932 C5.7444836,3.60700119 5.57135204,3.5 5.38196601,3.5 L2,3.5 Z\"\n                id=\"Path-2\"\n                stroke=\"#6E7A8A\"\n                fill=\"#D5DDE5\"\n            />\n        </g>\n\n        <style jsx>{`\n            svg {\n                display: block;\n                margin: 3px 0;\n            }\n        `}</style>\n    </svg>\n)\n\nFolderClosed.propTypes = {\n    dataTest: propTypes.string.isRequired,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\n/**\n * @module\n * @returns {React.Component}\n */\nexport const Single = ({ dataTest }) => (\n    <svg\n        height=\"18px\"\n        version=\"1.1\"\n        viewBox=\"0 0 18 18\"\n        width=\"18px\"\n        data-test={`${dataTest}-iconsingle`}\n    >\n        <g\n            fill=\"none\"\n            fillRule=\"evenodd\"\n            id=\"icon/single\"\n            stroke=\"none\"\n            strokeWidth=\"1\"\n        >\n            <rect\n                fill=\"#A0ADBA\"\n                height=\"4\"\n                id=\"Rectangle\"\n                rx=\"1\"\n                width=\"4\"\n                x=\"7\"\n                y=\"7\"\n            />\n        </g>\n\n        <style jsx>{`\n            svg {\n                display: block;\n                margin: 3px 0;\n            }\n        `}</style>\n    </svg>\n)\n\nSingle.propTypes = {\n    dataTest: propTypes.string.isRequired,\n}\n","import React from 'react'\nimport propTypes from '@dhis2/prop-types'\n\n/**\n * @module\n * @returns {React.Component}\n */\nexport const Empty = ({ dataTest }) => (\n    <svg\n        height=\"18px\"\n        version=\"1.1\"\n        viewBox=\"0 0 18 18\"\n        width=\"18px\"\n        data-test={`${dataTest}-iconempty`}\n    >\n        <g\n            fill=\"none\"\n            fillRule=\"evenodd\"\n            id=\"icon/empty\"\n            stroke=\"none\"\n            strokeWidth=\"1\"\n        />\n\n        <style jsx>{`\n            svg {\n                display: block;\n                margin: 3px 0;\n            }\n        `}</style>\n    </svg>\n)\n\nEmpty.propTypes = {\n    dataTest: propTypes.string.isRequired,\n}\n","const UNIT_ID_PATTERN = '[a-zA-Z][a-zA-Z0-9]{10}'\n\n/* eslint-disable */\nexport const orgUnitPathPropType = (\n    propValue,\n    key,\n    compName,\n    location,\n    propFullName\n) => {\n    if (!new RegExp(`(\\/${UNIT_ID_PATTERN})+`).test(propValue[key])) {\n        return new Error(\n            `Invalid org unit path \\`${propValue[key]}\\` supplied to \\`${compName}.${propFullName}\\``\n        )\n    }\n}\n/* eslint-enable */\n\n/* eslint-disable */\nexport const orgUnitIdPropType = (\n    propValue,\n    key,\n    compName,\n    location,\n    propFullName\n) => {\n    if (!new RegExp(`^${UNIT_ID_PATTERN}$`).test(propValue[key])) {\n        return new Error(\n            `Invalid org unit id \\`${propValue[key]}\\` supplied to \\`${compName}.${propFullName}\\``\n        )\n    }\n}\n/* eslint-enable */\n","import { Checkbox, colors } from '@dhis2/ui-core'\nimport React from 'react'\nimport propTypes from 'prop-types'\nimport cx from 'classnames'\n\nimport { FolderOpen } from './icons/FolderOpen'\nimport { FolderClosed } from './icons/FolderClosed'\nimport { Single } from './icons/Single'\nimport { Empty } from './icons/Empty'\nimport { orgUnitPathPropType } from './propTypes'\n\n/**\n * @param {Object} props\n * @param {string} props.label\n * @param {Function} props.onToggleOpen\n * @param {bool} [props.loading]\n * @returns {React.Component}\n */\nconst DisabledSelectionLabel = ({ label, loading, onToggleOpen }) => (\n    <SingleSelectionLabel\n        checked={false}\n        loading={loading}\n        label={label}\n        onChange={onToggleOpen}\n    />\n)\n\nDisabledSelectionLabel.propTypes = {\n    label: propTypes.string.isRequired,\n    onToggleOpen: propTypes.func.isRequired,\n    loading: propTypes.bool,\n}\n\n/**\n * @param {Object} props\n * @param {string} props.label\n * @param {bool} [props.checked]\n * @param {bool} [props.loading]\n * @param {Function} [props.onChange]\n * @returns {React.Component}\n */\nconst SingleSelectionLabel = ({ checked, label, onChange, loading }) => (\n    <span\n        onClick={event => {\n            const payload = { checked: !checked }\n            onChange(payload, event)\n        }}\n        className={cx({ checked, loading })}\n    >\n        {label}\n\n        <style jsx>{`\n            span {\n                background: transparent;\n                border-radius: 3px;\n                color: ${colors.grey900};\n                cursor: pointer;\n                display: inline-block;\n                font-size: 14px;\n                line-height: 24px;\n                padding: 0 5px;\n                user-select: none;\n                white-space: nowrap;\n            }\n\n            .checked {\n                background: ${colors.teal700};\n                color: white;\n            }\n\n            .loading {\n                cursor: auto;\n            }\n        `}</style>\n    </span>\n)\n\nSingleSelectionLabel.propTypes = {\n    label: propTypes.string.isRequired,\n    checked: propTypes.bool,\n    loading: propTypes.bool,\n    onChange: propTypes.func,\n}\n\n/**\n * @param {Object} props\n * @param {bool} props.highlighted\n * @param {React.Component|React.Component[]} props.children\n * @returns {React.Component}\n */\nconst LabelContainer = ({ highlighted, children }) => (\n    <div className={cx({ highlighted })}>\n        <span>{children}</span>\n\n        <style jsx>{`\n            div {\n                display: flex;\n            }\n\n            span {\n                display: block;\n            }\n\n            .highlighted {\n                background: ${colors.teal200};\n                padding-right: 4px;\n            }\n        `}</style>\n    </div>\n)\n\nLabelContainer.propTypes = {\n    children: propTypes.node,\n    highlighted: propTypes.bool,\n}\n\n/**\n * @param {Object} props\n * @param {bool} props.hasChildren\n * @param {bool} props.open\n * @returns {React.Component}\n */\nconst Icon = ({ loading, hasChildren, open, dataTest }) => {\n    if (loading) {\n        return <Empty dataTest={dataTest} />\n    }\n\n    if (!hasChildren) {\n        return <Single dataTest={dataTest} />\n    }\n\n    if (open) {\n        return <FolderOpen dataTest={dataTest} />\n    }\n\n    return <FolderClosed dataTest={dataTest} />\n}\n\nIcon.propTypes = {\n    dataTest: propTypes.string.isRequired,\n    hasChildren: propTypes.bool,\n    loading: propTypes.bool,\n    open: propTypes.bool,\n}\n\nconst IconizedCheckbox = ({\n    checked,\n    dataTest,\n    hasChildren,\n    indeterminate,\n    label,\n    loading,\n    name,\n    open,\n    value,\n    onChange,\n}) => {\n    const icon = (\n        <Icon\n            loading={loading}\n            open={open}\n            hasChildren={hasChildren}\n            dataTest={dataTest}\n        />\n    )\n\n    const checkboxLabel = (\n        <>\n            <span>{icon}</span>\n            {label}\n\n            <style jsx>{`\n                span {\n                    display: inline-block;\n                    margin-right: 4px;\n                }\n            `}</style>\n        </>\n    )\n\n    return (\n        <>\n            <Checkbox\n                dense\n                checked={checked}\n                name={name}\n                value={value}\n                label={checkboxLabel}\n                indeterminate={indeterminate}\n                onChange={onChange}\n            />\n        </>\n    )\n}\n\nIconizedCheckbox.propTypes = {\n    checked: propTypes.bool.isRequired,\n    dataTest: propTypes.string.isRequired,\n    hasChildren: propTypes.bool.isRequired,\n    indeterminate: propTypes.bool.isRequired,\n    label: propTypes.string.isRequired,\n    loading: propTypes.bool.isRequired,\n    name: propTypes.string.isRequired,\n    open: propTypes.bool.isRequired,\n    value: propTypes.string.isRequired,\n    onChange: propTypes.func.isRequired,\n}\n\nconst createNewSelected = ({ selected, path, checked, singleSelection }) => {\n    const pathIndex = selected.indexOf(path)\n\n    if (checked && pathIndex !== -1) return selected\n    if (singleSelection && checked) return [path]\n    if (checked) return [...selected, path]\n    if (pathIndex === -1) return selected\n    if (singleSelection) return []\n    if (selected.indexOf(path) === 0) return selected.slice(1)\n\n    const prevSlice = selected.slice(0, pathIndex)\n    const nextSlice = selected.slice(pathIndex + 1)\n    return [...prevSlice, ...nextSlice]\n}\n\n/**\n * @module\n * @param {Label.PropTypes} props\n * @returns {React.Component}\n */\nconst Label = ({\n    id,\n    path,\n    open,\n    loading,\n    checked,\n    onChange,\n    dataTest,\n    selected,\n    hasChildren,\n    highlighted,\n    displayName,\n    onToggleOpen,\n    disableSelection,\n    singleSelection,\n    hasSelectedDescendants,\n}) => {\n    const onClick = ({ checked }, event) => {\n        const newSelected = createNewSelected({\n            selected,\n            path,\n            checked,\n            singleSelection,\n        })\n\n        onChange({ id, path, checked, selected: newSelected }, event)\n    }\n\n    if (disableSelection) {\n        return (\n            <LabelContainer highlighted={highlighted}>\n                <DisabledSelectionLabel\n                    label={displayName}\n                    loading={loading}\n                    onToggleOpen={onToggleOpen}\n                />\n            </LabelContainer>\n        )\n    }\n\n    if (singleSelection) {\n        return (\n            <LabelContainer highlighted={highlighted}>\n                <SingleSelectionLabel\n                    checked={checked}\n                    label={displayName}\n                    onChange={onClick}\n                    loading={loading}\n                >\n                    {displayName}\n                </SingleSelectionLabel>\n            </LabelContainer>\n        )\n    }\n\n    return (\n        <LabelContainer highlighted={highlighted}>\n            <IconizedCheckbox\n                dataTest={dataTest}\n                checked={checked}\n                name=\"org-unit\"\n                value={id}\n                label={displayName}\n                loading={loading}\n                indeterminate={!checked && hasSelectedDescendants}\n                onChange={onClick}\n                open={open}\n                hasChildren={hasChildren}\n            />\n        </LabelContainer>\n    )\n}\n\n/**\n * @typedef {Object} PropTypes\n * @static\n *\n * @prop {string} id\n * @prop {string} path\n * @prop {string} displayName\n * @prop {bool} open\n * @prop {bool} loading\n * @prop {bool} hasChildren\n * @prop {Function} [onChange]\n * @prop {Function} [onToggleOpen]\n * @prop {bool} [checked]\n * @prop {bool} [highlighted]\n * @prop {bool} [disableSelection]\n * @prop {bool} [singleSelection]\n * @prop {bool} [hasSelectedDescendants]\n */\nLabel.propTypes = {\n    dataTest: propTypes.string.isRequired,\n    displayName: propTypes.string.isRequired,\n    hasChildren: propTypes.bool.isRequired,\n    id: propTypes.string.isRequired,\n    loading: propTypes.bool.isRequired,\n    open: propTypes.bool.isRequired,\n    path: propTypes.string.isRequired,\n    onChange: propTypes.func.isRequired,\n    onToggleOpen: propTypes.func.isRequired,\n    checked: propTypes.bool,\n    disableSelection: propTypes.bool,\n    hasSelectedDescendants: propTypes.bool,\n    highlighted: propTypes.bool,\n    selected: propTypes.arrayOf(orgUnitPathPropType),\n    singleSelection: propTypes.bool,\n}\n\nexport { Label }\n","/**\n * @param {string[]} includedPaths\n * @param {string} path\n * @returns {bool}\n */\nconst isPathIncluded = (includedPaths, path) => {\n    const isIncluded = includedPaths.some(includedPath => {\n        if (path === includedPath) return true\n        return includedPath.indexOf(`${path}/`) === 0\n    })\n\n    return isIncluded\n}\n\n/**\n * Returns all the childrenIds that should be rendered.\n * An id will be included if it's parent's path + the id is inside\n * the \"filter\" or the parent's path + id is a substring\n * of the paths in \"filter\" (then it's a parent path of\n * the units that should be included itself)\n *\n * @param {Object} node\n * @param {{ id: String }[]} node.children\n * @param {string[]} includedPaths\n * @returns {string[]}\n */\nexport const computeChildNodes = (node, filter) => {\n    if (!filter.length) {\n        return node.children\n    }\n\n    return node.children.filter(child => {\n        return isPathIncluded(filter, `${node.path}/${child.id}`)\n    })\n}\n","/**\n * Checks wether there are descendants of a path in the\n * array of selected paths\n *\n * @param {string} path\n * @param {string[]} selected\n * @returns {bool}\n */\nexport const hasDescendantSelectedPaths = (path, selected) =>\n    selected.some(\n        selectedPath =>\n            selectedPath !== path && selectedPath.indexOf(path) === 0\n    )\n","import { useEffect, useState } from 'react'\n\n/**\n * @param {Object} args\n * @param {string} args.path\n * @param {string} [args.errorMessage]\n * @param {string} [args.autoExpandLoadingError]\n * @param {string[]} args.expanded\n * @param {Function} [args.onExpand]\n * @param {Function} [args.onCollapse]\n * @returns {Object}\n */\nexport const useOpenState = ({\n    path,\n    expanded,\n    onExpand,\n    onCollapse,\n    errorMessage,\n    autoExpandLoadingError,\n}) => {\n    const autoExpand = autoExpandLoadingError && !!errorMessage\n    const [openedOnceDueToError, setOpenedOnce] = useState(!!errorMessage)\n    const [open, setOpen] = useState(autoExpand || expanded.includes(path))\n\n    useEffect(() => {\n        if (autoExpand && !openedOnceDueToError) {\n            setOpen(true)\n            setOpenedOnce(true)\n        }\n    }, [autoExpand, openedOnceDueToError])\n\n    const onToggleOpen = () => {\n        const newOpen = !open\n        const payload = { path }\n\n        setOpen(newOpen)\n\n        if (onExpand && newOpen) {\n            onExpand(payload)\n        } else if (onCollapse && !newOpen) {\n            onCollapse(payload)\n        }\n    }\n\n    return { open, onToggleOpen }\n}\n","export const fromEntries = entries =>\n    entries.reduce(\n        (collection, [key, name]) => ({\n            ...collection,\n            [key]: name,\n        }),\n        {}\n    )\n","import { fromEntries } from '../fromEntries'\n\nconst withChildrenFields = 'children[path,displayName,id],displayName,path,id'\nconst withoutChildrenFields = 'displayName,path,id'\n\nexport const createOrgUnitQuery = id => ({\n    resource: `organisationUnits/${id}`,\n    params: ({ withChildren, isUserDataViewFallback }) => ({\n        isUserDataViewFallback,\n        fields: withChildren ? withChildrenFields : withoutChildrenFields,\n        paging: false,\n    }),\n})\n\nexport const createQuery = ids =>\n    ids.reduce((query, id) => ({ ...query, [id]: createOrgUnitQuery(id) }), {})\n\n/**\n * @param {Object.<string, Object>[]} nodes\n * @returns {}\n */\nexport const addMissingDisplayNameProps = nodes => {\n    const nodeEntries = Object.entries(nodes)\n    const nodesWithDisplayName = nodeEntries.map(([id, node]) => {\n        const displayName = node.displayName || ''\n        return [id, { ...node, displayName }]\n    })\n\n    return fromEntries(nodesWithDisplayName)\n}\n","import { useDataQuery } from '@dhis2/app-runtime'\n\nimport { addMissingDisplayNameProps, createQuery } from './useOrgData/helpers'\n\n/**\n * @param {string[]} ids\n * @param {Object} [options]\n * @param {boolean} [options.withChildren]\n * @param {boolean} [options.isUserDataViewFallback]\n * @returns {Object}\n */\nexport const useOrgData = (\n    ids,\n    { withChildren = true, isUserDataViewFallback } = {}\n) => {\n    const query = createQuery(ids)\n    const variables = { withChildren, isUserDataViewFallback }\n    const { loading, error, data, refetch } = useDataQuery(query, { variables })\n    const nodes = data ? addMissingDisplayNameProps(data) : {}\n\n    return { loading, error, data: nodes, refetch }\n}\n","/* eslint-disable */\n/**\n * REMOVE THE ESLINT-DISABLE\n * !!!!!!!!!!!!!!!!!!!!!!!!!\n * !!!!!!!!! BEFORE !!!!!!!!\n * !!!!!!!!!!!!!!!!!!!!!!!!!\n * APPROVING THE PR\n */\nimport { CircularLoader, Node } from '@dhis2/ui-core';\nimport { resolve } from 'styled-jsx/css'\nimport React, { useEffect } from 'react'\nimport i18n from '@dhis2/d2-i18n'\nimport propTypes from '@dhis2/prop-types'\n\nimport { ErrorMessage } from './ErrorMessage';\nimport { Label } from './Label';\nimport { computeChildNodes } from './computeChildNodes';\nimport { hasDescendantSelectedPaths } from './hasDescendantSelectedPaths';\nimport { orgUnitIdPropType, orgUnitPathPropType } from './propTypes';\nimport { useOpenState } from './useOpenState';\nimport { useOrgData } from './useOrgData';\n\nconst loadingSpinnerStyles = resolve`\n    .small {\n        display: block;\n        margin: 3px 0;\n        width: 18px;\n        height: 18px;\n    }\n`\n\nconst LoadingSpinner = () => (\n    <div>\n        <CircularLoader small className={loadingSpinnerStyles.className} />\n        <style>{loadingSpinnerStyles.styles}</style>\n        <style jsx>{`\n            div {\n                width: 24px;\n            }\n        `}</style>\n    </div>\n)\n\nexport const OrganisationUnitNode = ({\n    autoExpandLoadingError,\n    dataTest,\n    disableSelection,\n    displayName,\n    expanded,\n    highlighted,\n    id,\n    isUserDataViewFallback,\n    path,\n    selected,\n    singleSelection,\n    filter,\n    onChange,\n    onChildrenLoaded,\n    onCollapse,\n    onExpand,\n}) => {\n    const { loading, error, data } = useOrgData([id], { isUserDataViewFallback })\n    const childNodes = !loading && !error\n        ? computeChildNodes(data[id], filter)\n        : []\n    const hasChildren = !!childNodes.length\n    const hasSelectedDescendants = hasDescendantSelectedPaths(path, selected)\n    const isHighlighted = highlighted.includes(path)\n    const { open, onToggleOpen } = useOpenState({\n        autoExpandLoadingError,\n        errorMessage: error && error.toString(),\n        path,\n        expanded,\n        onExpand,\n        onCollapse,\n    })\n\n    const isSelected = selected.includes(path)\n\n    useEffect(\n        () => {\n            if (!loading && !error && onChildrenLoaded) {\n                onChildrenLoaded(data)\n            }\n        },\n        [ loading, error, onChildrenLoaded ]\n    )\n\n    const label = (\n        <Label\n            checked={isSelected}\n            dataTest={`${dataTest}-label`}\n            disableSelection={disableSelection}\n            displayName={displayName}\n            hasChildren={hasChildren}\n            hasSelectedDescendants={hasSelectedDescendants}\n            highlighted={isHighlighted}\n            id={id}\n            loading={loading}\n            onChange={onChange}\n            selected={selected}\n            onToggleOpen={onToggleOpen}\n            open={open}\n            path={path}\n            singleSelection={singleSelection}\n        />\n    )\n\n    /**\n     * No children means no arrow, therefore we have to provide something.\n     * While \"loading\" is true, \"hasChildren\" is false\n     * There are some possible children variants as content of this node:\n     *\n     * 1. Nothing; There are no children\n     * 2. Placeholder: There are children, but the Node is closed (show arrow)\n     * 3. Error: There are children and loading information somehow failed\n     * 4. Child nodes: There are children and the node is open\n     */\n    const showPlaceholder = hasChildren && !open && !error\n    const showChildNodes = hasChildren && open && !error\n\n    return (\n        <Node\n            dataTest={`${dataTest}-node`}\n            open={open}\n            onOpen={onToggleOpen}\n            onClose={onToggleOpen}\n            component={label}\n            icon={loading && <LoadingSpinner />}\n        >\n            {error && (\n                <ErrorMessage dataTest={dataTest}>\n                    {i18n.t('Could not load children')}\n                </ErrorMessage>\n            )}\n            {showPlaceholder && <span data-test={`${dataTest}-placeholder`} />}\n            {showChildNodes && childNodes.map(child => {\n                const childPath = `${path}/${child.id}`\n                const grandChildNodes = computeChildNodes(child, filter)\n\n                return (\n                    <OrganisationUnitNode\n                        key={childPath}\n                        autoExpandLoadingError={autoExpandLoadingError}\n                        childNodes={grandChildNodes}\n                        dataTest={dataTest}\n                        disableSelection={disableSelection}\n                        displayName={child.displayName}\n                        expanded={expanded}\n                        filter={filter}\n                        highlighted={highlighted}\n                        id={child.id}\n                        isUserDataViewFallback={isUserDataViewFallback}\n                        path={childPath}\n                        selected={selected}\n                        singleSelection={singleSelection}\n                        onChange={onChange}\n                        onChildrenLoaded={onChildrenLoaded}\n                        onCollapse={onCollapse}\n                        onExpand={onExpand}\n                    />\n                )\n            })}\n        </Node>\n    )\n}\n\nOrganisationUnitNode.propTypes = {\n    dataTest: propTypes.string.isRequired,\n    id: propTypes.string.isRequired,\n    onChange: propTypes.func.isRequired,\n\n    autoExpandLoadingError: propTypes.bool,\n    disableSelection: propTypes.bool,\n    displayName: propTypes.string,\n    expanded: propTypes.arrayOf(orgUnitPathPropType),\n    filter: propTypes.arrayOf(orgUnitPathPropType),\n    /**\n     * The parent already knows whether this node has children or not\n     * before we load the children's details, so we can use this information\n     * even during the loading phase\n     */\n    hasChildren: propTypes.bool,\n    highlighted: propTypes.arrayOf(orgUnitPathPropType),\n    isUserDataViewFallback: propTypes.bool,\n    path: orgUnitPathPropType,\n    selected: propTypes.arrayOf(orgUnitPathPropType),\n    singleSelection: propTypes.bool,\n\n    onCollapse: propTypes.func,\n    onExpand: propTypes.func,\n    onChildrenLoaded: propTypes.func,\n}\n","import React from 'react'\nimport i18n from '@dhis2/d2-i18n'\nimport propTypes from 'prop-types'\n\nexport const RootError = ({ dataTest, error }) => (\n    <div data-test={`${dataTest}-loading`}>\n        {i18n.t('Error: ')}\n        {error}\n    </div>\n)\n\nRootError.propTypes = {\n    dataTest: propTypes.string.isRequired,\n    error: propTypes.string.isRequired,\n}\n","import { CircularLoader } from '@dhis2/ui-core'\nimport React from 'react'\nimport propTypes from 'prop-types'\n\nexport const RootLoading = ({ dataTest }) => (\n    <div data-test={`${dataTest}-loading`}>\n        <CircularLoader small />\n\n        <style jsx>{`\n            div {\n                display: flex;\n                justify-content: center;\n            }\n        `}</style>\n    </div>\n)\n\nRootLoading.propTypes = {\n    dataTest: propTypes.string.isRequired,\n}\n","/**\n * @param {string} path\n * @returns {string[]}\n */\nexport const extractAllPathsFromPath = path => {\n    // remove leading slash and split by path delimiter/slashes\n    const segments = path.replace(/^\\//, '').split('/')\n\n    const withSubPaths = segments.map((segment, index) => {\n        // take all segments from 0 to index and join them with the delimiter\n        return `/${segments.slice(0, index + 1).join('/')}`\n    })\n\n    return withSubPaths\n}\n\n/**\n * @param {string[]} initiallyExpanded\n * @returns {string[]}\n */\nexport const getInitiallyExpandedPaths = initiallyExpanded =>\n    initiallyExpanded.reduce((all, curPath) => {\n        const allPathsInCurPath = extractAllPathsFromPath(curPath)\n        return [...all, ...allPathsInCurPath]\n    }, [])\n\n/**\n * @param {Object} args\n * @param {string[]} args.expanded\n * @param {Function} args.setExpanded\n * @param {Function} [args.onExpand]\n * @param {Function} [args.onCollapse]\n * @returns {{ handleExpand: Function, handleCollapse: Function }}\n */\nexport const createExpandHandlers = ({\n    expanded,\n    setExpanded,\n    onExpand,\n    onCollapse,\n}) => {\n    const handleExpand = ({ path, ...rest }) => {\n        if (!expanded.includes(path)) {\n            setExpanded([...expanded, path])\n\n            if (onExpand) {\n                onExpand({ path, ...rest })\n            }\n        }\n    }\n\n    const handleCollapse = ({ path, ...rest }) => {\n        const pathIndex = expanded.indexOf(path)\n        if (pathIndex !== -1) {\n            const updatedExpanded =\n                pathIndex === 0\n                    ? expanded.slice(1)\n                    : [\n                          ...expanded.slice(0, pathIndex),\n                          ...expanded.slice(pathIndex + 1),\n                      ]\n\n            setExpanded(updatedExpanded)\n\n            if (onCollapse) {\n                onCollapse({ path, ...rest })\n            }\n        }\n    }\n\n    return { handleExpand, handleCollapse }\n}\n","import { useState } from 'react'\nimport {\n    getInitiallyExpandedPaths,\n    createExpandHandlers,\n} from './useExpanded/helpers'\n\n/**\n * @param {string[]} initiallyExpanded\n * @param {Function} [onExpand]\n * @param {Function} [onCollapse]\n * @returns {{ expanded: string[], handleExpand: Function, handleCollapse: Function }}\n */\nexport const useExpanded = (initiallyExpanded, onExpand, onCollapse) => {\n    const allInitiallyExpandedPaths = getInitiallyExpandedPaths(\n        initiallyExpanded\n    )\n    const [expanded, setExpanded] = useState(allInitiallyExpandedPaths)\n    const { handleExpand, handleCollapse } = createExpandHandlers({\n        expanded,\n        setExpanded,\n        onExpand,\n        onCollapse,\n    })\n\n    return { expanded, handleExpand, handleCollapse }\n}\n","import { useEffect, useState } from 'react'\n\n/**\n * This will create a new reloadId everytime \"forceReload\" changes to true,\n * which can be used as the \"key\" prop on the org unit tree.\n * When that id changes, the whole tree rerenders\n * and therefore triggers all \"useDataQuery\"s to\n * run the query again\n *\n * @param {bool} forceReload\n * @returns {Int}\n */\nexport const useForceReload = forceReload => {\n    const [reloadId, setReloadId] = useState(0)\n\n    useEffect(() => {\n        forceReload === true && setReloadId(reloadId + 1)\n    }, [forceReload])\n\n    return reloadId\n}\n","import React, { useEffect } from 'react'\nimport propTypes from 'prop-types'\n\nimport { OrganisationUnitNode } from './OrganisationUnitTree/OrganisationUnitNode'\nimport { RootError } from './OrganisationUnitTree/RootError'\nimport { RootLoading } from './OrganisationUnitTree/RootLoading'\nimport { orgUnitPathPropType } from './OrganisationUnitTree/propTypes'\nimport { useExpanded } from './OrganisationUnitTree/useExpanded'\nimport { useForceReload } from './OrganisationUnitTree/useForceReload'\nimport { useOrgData } from './OrganisationUnitTree/useOrgData'\n\n/**\n * @module\n * @param {OrganisationUnitTree.PropTypes} props\n * @returns {React.Component}\n *\n * @example\n * import { OrganisationUnitTree } from '@dhis2/ui-widgets'\n *\n * @example\n * <OrganisationUnitTree\n *     name=\"Root org unit\"\n *     roots=\"A0000000000\"\n *     onChange={onChange}\n *     onExpand={onExpand}\n *     onCollapse={onCollapse}\n *     onChildrenLoaded={onChildrenLoaded}\n *     initiallyExpanded={['/A0000000000/A0000000001']}\n *     filter={['/A0000000000/A0000000001/A0000000003']}\n * />\n *\n * @see Specification: {@link https://github.com/dhis2/design-system/blob/master/organisms/organisation-unit-tree/org-unit-tree.md|Design system}\n * @see Live demo: {@link /demo/?path=/story/organisationunittree--collapsed|Storybook}\n */\nconst OrganisationUnitTree = ({\n    onChange,\n    roots,\n\n    autoExpandLoadingError,\n    dataTest,\n    disableSelection,\n    forceReload,\n    highlighted,\n    isUserDataViewFallback,\n    initiallyExpanded,\n    filter,\n    selected,\n    singleSelection,\n\n    onExpand,\n    onCollapse,\n    onChildrenLoaded,\n}) => {\n    const rootIds = Array.isArray(roots) ? roots : [roots]\n    const reloadId = useForceReload(forceReload)\n    const { loading, error, data, refetch } = useOrgData(rootIds, {\n        withChildren: false,\n        isUserDataViewFallback,\n    })\n    const { expanded, handleExpand, handleCollapse } = useExpanded(\n        initiallyExpanded,\n        onExpand,\n        onCollapse\n    )\n\n    useEffect(() => {\n        // do not refetch on initial render\n        if (refetch && reloadId > 0) {\n            refetch()\n        }\n    }, [reloadId, refetch])\n\n    return (\n        <div data-test={dataTest}>\n            {error && <RootError error={error} dataTest={dataTest} />}\n            {loading && <RootLoading dataTest={dataTest} />}\n            {!error &&\n                !loading &&\n                rootIds.map(rootId => {\n                    const rootNode = data[rootId]\n                    const rootPath = `/${rootId}`\n\n                    return (\n                        <OrganisationUnitNode\n                            key={rootPath}\n                            autoExpandLoadingError={autoExpandLoadingError}\n                            dataTest={dataTest}\n                            disableSelection={disableSelection}\n                            displayName={rootNode.displayName}\n                            expanded={expanded}\n                            highlighted={highlighted}\n                            id={rootId}\n                            isUserDataViewFallback={isUserDataViewFallback}\n                            filter={filter}\n                            path={rootPath}\n                            selected={selected}\n                            singleSelection={singleSelection}\n                            onChange={onChange}\n                            onChildrenLoaded={onChildrenLoaded}\n                            onCollapse={handleCollapse}\n                            onExpand={handleExpand}\n                        />\n                    )\n                })}\n        </div>\n    )\n}\n\n/**\n * @typedef {Object} PropTypes\n * @static\n *\n * @prop {string|string[]} roots\n * Root org unit id(s)\n *\n * @prop {Function} onChange\n * Will be called with the following object\n * { id: string; path: string; checked: boolean; }\n *\n * @prop {bool} [autoExpandLoadingError]\n * When set, the error when loading children\n * fails will be shown automaticlly\n *\n * @prop {bool} [singleSelection]\n * When set, no checkboxes will be displayed and only the first selected path\n * in `selected` will be highlighted\n *\n * @prop {bool} [disableSelection]\n * When set to true, no unit can be selected\n *\n * @prop {string[]} [filter]\n * All organisation units with a path that inclused the provided\n * paths will be shown. All others will not be rendered.\n * When not provided, all org units will be shown.\n *\n * @prop {bool} [forceReload]\n * When set to \"true\", everything will be reloaded.\n * In order to load it again after reloading,\n * \"forceReload\" has to be set to false and then to true again\n *\n * @prop {string[]} [selected]\n * An array of paths of selected OUs.\n * The path of an OU is the UIDs of the OU and all its parent OUs separated\n * by slashes (/)\n *\n * @prop {string[]} [initiallyExpanded]\n * An array of OU paths that will be expanded automatically\n * as soon as they are encountered.\n * The path of an OU is the UIDs of the OU\n * and all its parent OUs separated by slashes (/)\n * Note: This replaces \"openFirstLevel\" as that's redundant\n *\n * @prop {bool} [isUserDataViewFallback]\n * When provided, the \"isUserDataViewFallback\" option will be send when\n * requesting the org units\n *\n * @prop {string[]} [highlighted]\n * All units provided to \"highlighted\" as path will be visually\n * highlighted.\n * Note:\n * The d2-ui component used two props for this:\n * * searchResults\n * * highlightSearchResults\n *\n * @prop {Function} [onExpand]\n * Called with { path: string }\n * with the path of the parent of the level opened\n *\n * @prop {Function} [onCollapse]\n * Called with { path: string }\n * with the path of the parent of the level closed\n *\n * @prop {Function} [onChildrenLoaded]\n * Called with the children's data that was loaded\n */\nOrganisationUnitTree.propTypes = {\n    roots: propTypes.oneOfType([\n        propTypes.string,\n        propTypes.arrayOf(propTypes.string),\n    ]).isRequired,\n    onChange: propTypes.func.isRequired,\n\n    autoExpandLoadingError: propTypes.bool,\n    dataTest: propTypes.string,\n    disableSelection: propTypes.bool,\n    filter: propTypes.arrayOf(orgUnitPathPropType),\n    forceReload: propTypes.bool,\n    highlighted: propTypes.arrayOf(orgUnitPathPropType),\n    initiallyExpanded: propTypes.arrayOf(orgUnitPathPropType),\n    isUserDataViewFallback: propTypes.bool,\n    selected: propTypes.arrayOf(orgUnitPathPropType),\n    singleSelection: propTypes.bool,\n    onChildrenLoaded: propTypes.func,\n    onCollapse: propTypes.func,\n    onExpand: propTypes.func,\n\n    /**\n     * @prop {string[]} [idsThatShouldBeReloaded]\n     * All units with ids (not paths!) provided\n     * to \"idsThatShouldBeReloaded\" will be reloaded\n     * In order to reload an id twice, the array must be changed\n     * while keeping the id to reload in the array\n     *\n     * NOTE: This is currently not working due to a limitation\n     * of the data engine (we can't force specific resource to reload,\n     * we'd have to reload the sibling nodes currently as well)\n     */\n    //idsThatShouldBeReloaded: propTypes.arrayOf(orgUnitIdPropType),\n}\n\nOrganisationUnitTree.defaultProps = {\n    dataTest: 'dhis2-uiwidgets-orgunittree',\n    filter: [],\n    highlighted: [],\n    initiallyExpanded: [],\n    selected: [],\n}\n\nexport { OrganisationUnitTree }\n"],"names":["Settings","className","React","propTypes","string","Apps","Cancel","appIcon","colors","white","trailIcon","grey900","settingsIcon","TrailIcon","onClick","func","Search","value","onChange","onIconClick","contextPath","InputField","i18n","t","styles","defaultProps","isRequired","Item","name","path","img","theme","primary050","List","apps","filter","displayName","appName","length","toLowerCase","match","map","idx","defaultAction","icon","array","show","evt","elContainer","contains","target","setState","state","Card","props","document","addEventListener","onDocClick","removeEventListener","c","onToggle","AppsIcon","AppMenu","Component","Info","Help","Exit","Account","TextIcon","dataTestId","title","indexOf","split","undefined","ImageIcon","src","ProfileName","children","ProfileEmail","ProfileEdit","ProfileDetails","email","ProfileHeader","iconStyle","grey700","list","label","link","nobase","ProfileContents","avatar","Divider","MenuItem","element","ProfileMenu","avatarPath","id","Profile","me","user","userIcon","object","logoStyles","query","customLogo","resource","pathExists","data","images","png","LogoImage","useDataQuery","loading","error","Logo","LogoIconWhite","baseUrl","Title","app","instance","Email","Message","messageIcon","interpretationIcon","kind","NotificationIcon","count","href","secondary300","number","oneOf","Notifications","interpretations","messages","systemInfo","notifications","HeaderBar","useEffect","getPath","startsWith","modules","forEach","locale","settings","keyUiLocale","changeLanguage","systemName","unreadInterpretations","unreadMessageConversations","ErrorMessage","dataTest","grey800","spacers","dp4","any","FolderOpen","FolderClosed","Single","Empty","UNIT_ID_PATTERN","orgUnitPathPropType","propValue","key","compName","location","propFullName","RegExp","test","Error","DisabledSelectionLabel","onToggleOpen","bool","SingleSelectionLabel","checked","event","payload","teal700","cx","LabelContainer","highlighted","teal200","node","Icon","hasChildren","open","IconizedCheckbox","indeterminate","checkboxLabel","Checkbox","createNewSelected","selected","singleSelection","pathIndex","slice","prevSlice","nextSlice","Label","disableSelection","hasSelectedDescendants","newSelected","arrayOf","isPathIncluded","includedPaths","isIncluded","some","includedPath","computeChildNodes","child","hasDescendantSelectedPaths","selectedPath","useOpenState","expanded","onExpand","onCollapse","errorMessage","autoExpandLoadingError","autoExpand","useState","openedOnceDueToError","setOpenedOnce","includes","setOpen","newOpen","fromEntries","entries","reduce","collection","withChildrenFields","withoutChildrenFields","createOrgUnitQuery","params","withChildren","isUserDataViewFallback","fields","paging","createQuery","ids","addMissingDisplayNameProps","nodes","nodeEntries","Object","nodesWithDisplayName","useOrgData","variables","refetch","loadingSpinnerStyles","LoadingSpinner","CircularLoader","OrganisationUnitNode","onChildrenLoaded","childNodes","isHighlighted","toString","isSelected","showPlaceholder","showChildNodes","Node","childPath","grandChildNodes","RootError","RootLoading","extractAllPathsFromPath","segments","replace","withSubPaths","segment","index","join","getInitiallyExpandedPaths","initiallyExpanded","all","curPath","allPathsInCurPath","createExpandHandlers","setExpanded","handleExpand","rest","handleCollapse","updatedExpanded","useExpanded","allInitiallyExpandedPaths","useForceReload","forceReload","reloadId","setReloadId","OrganisationUnitTree","roots","rootIds","Array","isArray","rootId","rootNode","rootPath","oneOfType"],"mappings":"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"}